<!-- /index.html ‚Äî Decision Space v6.4 (2026 Premium / Desktop-Upgrade + Native Sheet) -->
<!DOCTYPE html>
<html lang="de" class="no-js" translate="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#05070E" />
  <meta name="format-detection" content="telephone=no" />

  <title>Damit Finanzen nicht st√§ndig im Kopf sind.</title>
  <meta name="description" content="Privat ¬∑ Familie ¬∑ Verantwortung. Kurz einordnen, ob alles passt ‚Äì ohne Druck. Einkommen, Absicherung, R√ºcklagen, Familie, Vorsorge: so geordnet, dass es im Alltag nicht st√§ndig im Kopf ist." />
  <link rel="canonical" href="https://heikohaerter.com" />

  <!-- OG/Twitter -->
  <meta property="og:site_name" content="Heiko Haerter ‚Äì Allfinanz & Entscheidungslogik" />
  <meta property="og:title" content="Damit Finanzen nicht st√§ndig im Kopf sind." />
  <meta property="og:description" content="Kurz einordnen, ob alles passt. Privat ¬∑ Familie ¬∑ Verantwortung." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://heikohaerter.com" />
  <meta property="og:locale" content="de_DE" />
  <meta property="og:image" content="https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Perf -->
  <link rel="dns-prefetch" href="https://outlook.office.com">
  <link rel="preconnect" href="https://outlook.office.com" crossorigin>
  <link rel="preconnect" href="https://static.wixstatic.com" crossorigin>
  <link rel="preconnect" href="https://wa.me" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Fonts -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600;700&display=swap"></noscript>

  <!-- LCP Preload (Hero) -->
  <link
    rel="preload"
    as="image"
    href="https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=1400"
    imagesrcset="
      https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=960 960w,
      https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=1400 1400w,
      https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=2000 2000w
    "
    imagesizes="(min-width:1024px) 52vw, 92vw"
    fetchpriority="high"
  />

  <!-- Icons / Manifest -->
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"Heiko Haerter ‚Äì Allfinanz & Entscheidungslogik",
    "image":"https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png",
    "address":{"@type":"PostalAddress","streetAddress":"Robert-Bosch-Str. 1","postalCode":"71277","addressLocality":"Rutesheim","addressCountry":"DE"},
    "url":"https://heikohaerter.com",
    "telephone":"+49 176 60408380",
    "email":"Heiko.Haerter@dvag.de",
    "priceRange":"‚Ç¨‚Ç¨",
    "sameAs":[
      "https://www.linkedin.com/in/heiko-haerter-3755b2260/",
      "https://www.xing.com/profile/Heiko_Haerter3",
      "https://www.instagram.com/heiko.haerter.coach/"
    ],
    "areaServed":"DE"
  }
  </script>

  <!-- Consent Mode v2 (Default denied) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('consent', 'default', {
      ad_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      analytics_storage: 'denied',
      wait_for_update: 500
    });
    window.__cmpState = { analytics: false, marketing: false, ts: null, src: {} };
  </script>

  <noscript>
    <style>
      .fade-up{opacity:1!important;transform:none!important;filter:none!important}
      .sticky-cta{display:none!important}
      .space{display:none!important}
      .mnav, .mnav-backdrop, .cmp-backdrop, .cmp-wrap{display:none!important}
    </style>
  </noscript>

  <style>
    :root{
      --bg:#05070E; --bg2:#02040A;
      --text:#F7F8FC; --muted:#A8B1C5; --muted2:#8F97AA;
      --gold:#E6D08A; --focus:#90C2FF;
      --danger:#c85151; --warn:#d6c45a; --ok:#55b76b;

      --radius:22px;
      --ease:cubic-bezier(.25,.46,.25,1);

      --ambient-x:.5; --ambient-y:.15; --ambient-opacity:.14;

      /* premium strokes */
      --line:rgba(255,255,255,.10);
      --line2:rgba(255,255,255,.18);
      --glass:rgba(255,255,255,.03);
      --glass2:rgba(255,255,255,.045);

      /* shadows */
      --shadow: 0 34px 110px rgba(0,0,0,.52);
      --shadow2: 0 20px 70px rgba(0,0,0,.34);

      --tap: 52px;
      --safe-b: env(safe-area-inset-bottom, 0px);
      --safe-t: env(safe-area-inset-top, 0px);

      /* Desktop polish */
      --maxw: 1260px;
      --panelbg:
        radial-gradient(120% 140% at 20% 0%, rgba(255,255,255,.075), transparent 58%),
        linear-gradient(180deg, rgba(255,255,255,.035), rgba(255,255,255,.018));
      --panelbd: rgba(255,255,255,.13);
      --glow: 0 0 0 1px rgba(255,255,255,.07), 0 18px 80px rgba(0,0,0,.38);
    }

    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto!important;animation:none!important;transition:none!important}
    }

    *,*::before,*::after{box-sizing:border-box}
    html{-webkit-text-size-adjust:100%;text-size-adjust:100%}
    body{
      margin:0;
      background:
        radial-gradient(1100px 760px at 18% -6%, rgba(120,150,255,.16), transparent 60%),
        radial-gradient(1000px 720px at 86% 6%, rgba(230,208,138,.12), transparent 58%),
        radial-gradient(900px 800px at 55% 120%, rgba(120,150,255,.09), transparent 55%),
        linear-gradient(180deg,var(--bg),var(--bg2) 62%);
      color:var(--text);
      font-family:"IBM Plex Sans","Inter",system-ui,sans-serif;
      -webkit-font-smoothing:antialiased;
      line-height:1.5;
      overflow-x:hidden;
      padding-bottom: var(--safe-b);
    }

    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%;height:auto}

    /* Subtle premium grain overlay (desktop makes it look less ‚Äúflat‚Äù) */
    .grain{
      position:fixed; inset:0;
      pointer-events:none; z-index:-1;
      opacity:.13;
      mix-blend-mode:overlay;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.36'/%3E%3C/svg%3E");
      background-size:180px 180px;
    }
    @media (prefers-reduced-motion: reduce){ .grain{display:none} }

    /* Skip link */
    .skip-link{
      position:absolute; left:12px; top:calc(10px + var(--safe-t));
      padding:.65rem .9rem; border-radius:999px;
      background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.2);
      transform:translateY(-160%); transition:transform .2s var(--ease);
      z-index:1101;
    }
    .skip-link:focus{ transform:translateY(0); outline:3px solid var(--focus); outline-offset:3px; }

    /* Scroll progress */
    .progress{
      position:fixed;top:0;left:0;height:3px;width:0;
      background:linear-gradient(90deg,var(--gold),#fff);
      z-index:1100;box-shadow:0 0 14px rgba(230,208,138,.52)
    }

    /* ambient */
    .space{
      position:fixed; inset:-20vh -10vw auto -10vw; height:62vh;
      pointer-events:none; z-index:-2; filter:blur(58px); opacity:var(--ambient-opacity);
    }
    .space::before{
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(44% 38% at calc(10% + 40% * var(--ambient-x)) calc(10% + 30% * var(--ambient-y)), rgba(230,208,138,.40) 0%, transparent 62%),
        radial-gradient(40% 36% at calc(82% - 30% * var(--ambient-x)) calc(12% + 28% * var(--ambient-y)), rgba(120,150,255,.33) 0%, transparent 64%);
      mix-blend-mode:screen;
      will-change:transform;
    }

    .section{padding:clamp(52px,8.5vw,138px) 0}
    .container{
      max-width:var(--maxw);
      margin-inline:auto;
      padding-inline:clamp(16px,5vw,44px);
    }
    .grid{display:grid;gap:clamp(.85rem,2.8vw,1.6rem)}
    .stack{display:flex;flex-direction:column;gap:clamp(.6rem,2vw,1.1rem)}
    .auto-grid{grid-template-columns:repeat(auto-fit,minmax(min(100%,280px),1fr))}

    h1,h2,h3{margin:0 0 .85rem;letter-spacing:-.02em;text-wrap:balance}
    h1{font-size:clamp(2.85rem,7.6vw,5.3rem);font-weight:900;letter-spacing:-0.05em;line-height:1.01}
    h2{font-size:clamp(2.05rem,5.6vw,3.15rem);font-weight:900;letter-spacing:-0.04em}
    h3{font-size:clamp(1.08rem,2.8vw,1.28rem);font-weight:900}
    p{margin:0 0 .65rem;color:var(--muted);font-size:clamp(1.03rem,1.1vw,1.10rem);line-height:1.78;max-width:66ch}

    .micro{font-size:.95rem;color:var(--muted2);letter-spacing:.01em;line-height:1.6}
    .hero-sub{font-size:1.16rem;color:#dbe0f4;margin-top:.55rem;max-width:60ch}
    .signature{font-family: ui-serif, "Canela","Tiempos Headline", Georgia, serif; font-weight:650; letter-spacing:-0.01em}

    /* premium buttons */
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      min-height:var(--tap); padding:1.02rem 1.38rem;
      border-radius:999px; border:1px solid var(--line);
      font-weight:900; letter-spacing:.01em;
      background:rgba(255,255,255,.055); color:var(--text);
      transition:transform .18s var(--ease), box-shadow .25s var(--ease), background .2s, filter .2s, border-color .2s;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
      box-shadow:0 12px 34px rgba(0,0,0,.18);
    }
    .btn:hover{filter:brightness(1.04);border-color:var(--line2)}
    .btn:active{transform:translateY(1px) scale(.99)}
    .btn-primary{
      background:
        radial-gradient(120% 140% at 30% 10%, rgba(255,255,255,.35), transparent 40%),
        linear-gradient(180deg, rgba(230,208,138,1), rgba(214,189,118,1));
      color:#111;
      border-color:rgba(230,208,138,.42);
      box-shadow:0 18px 62px rgba(230,208,138,.16), 0 12px 28px rgba(0,0,0,.24);
    }
    .btn-ghost{background:transparent;border-color:rgba(255,255,255,.16)}
    .btn.small{min-height:44px;padding:.62rem 1.02rem;font-weight:900}
    .btn[disabled]{opacity:.55;pointer-events:none}

    @media (max-width:1023px){
      .btn{width:100%}
    }

    /* Focus */
    a:focus-visible,button:focus-visible,[role="dialog"]:focus-visible,input:focus-visible,summary:focus-visible{
      outline:3px solid var(--focus);outline-offset:3px;border-radius:14px
    }
    label.btn.small:focus-within{outline:3px solid var(--focus);outline-offset:3px}

    /* Selected-state for radio labels */
    label.btn.small:has(input:checked),
    label.btn.small.is-selected{
      border-color: rgba(230,208,138,.62);
      box-shadow: 0 0 0 3px rgba(230,208,138,.14);
      background: rgba(230,208,138,.09);
    }

    /* Header */
    header{
      position:sticky;top:0;z-index:900;
      background:rgba(5,8,22,.78);
      border-bottom:1px solid rgba(255,255,255,.08);
      backdrop-filter:saturate(135%) blur(16px);
      padding-top: var(--safe-t);
    }
    .header-bar{display:flex;align-items:center;justify-content:space-between;min-height:76px;padding:.78rem 0;gap:1rem}
    .brand{display:flex;flex-direction:column}
    .brand-top{display:flex;align-items:center;gap:.65rem;font-weight:900}
    .brand-dot{
      width:.92rem;height:.92rem;border-radius:999px;
      background:conic-gradient(from 210deg,var(--gold),#fff,var(--gold));
      box-shadow:0 0 0 6px rgba(230,208,138,.16),0 0 30px rgba(230,208,138,.38);
      animation:pulse 2.6s ease-in-out infinite
    }
    @keyframes pulse{
      0%,100%{filter:drop-shadow(0 0 0 rgba(230,208,138,.0))}
      50%{filter:drop-shadow(0 0 14px rgba(230,208,138,.50))}
    }
    .nav{display:flex;align-items:center;gap:.55rem;flex-wrap:wrap}
    .nav a.link{padding:.42rem .7rem;border-radius:999px;color:var(--muted2)}
    .nav a.link:hover{color:var(--text);background:rgba(255,255,255,.05)}
    @media (max-width:980px){ .nav a.link{display:none} }

    /* Mobile menu button */
    .menu-btn{
      display:none;
      min-width:var(--tap);
      min-height:var(--tap);
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      align-items:center;justify-content:center;
      -webkit-tap-highlight-color: transparent;
      box-shadow:0 10px 26px rgba(0,0,0,.18);
    }
    .menu-btn:hover{border-color:var(--line2)}
    .menu-btn svg{width:22px;height:22px}
    @media (max-width:980px){ .menu-btn{display:inline-flex} }

    /* Mobile nav drawer */
    .mnav-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.56);
      backdrop-filter: blur(2px);
      z-index:980;
      display:none;
    }
    .mnav-backdrop.visible{display:block}
    .mnav{
      position:fixed; inset:calc(var(--safe-t) + 10px) 10px auto 10px;
      border-radius:22px;
      background:rgba(10,14,22,.98);
      border:1px solid rgba(255,255,255,.16);
      box-shadow: var(--shadow);
      z-index:981;
      display:none;
      overflow:hidden;
      transform: translateY(-6px);
    }
    .mnav.visible{display:block}
    .mnav .head{
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .mnav .list{display:grid;gap:6px;padding:12px 12px 14px}
    .mnav a{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03)}
    .mnav a .t{font-weight:900}
    .mnav a .s{color:var(--muted2);font-size:.9rem}
    .mnav .cta{margin-top:8px}

    /* Hero */
    .hero{position:relative;padding-top:clamp(68px,10vw,146px);padding-bottom:clamp(34px,5vw,68px)}
    .hero-grid{display:grid;gap:clamp(1.35rem,4vw,3.3rem)}
    @media (min-width:1024px){ .hero-grid{grid-template-columns:1.06fr .94fr;align-items:center} }
    #hero h1{max-width:17ch}
    .hero-figure{
      border-radius:32px;overflow:hidden; transform:translateZ(0);
      box-shadow:0 56px 160px rgba(0,0,0,.56), inset 0 0 0 1px rgba(255,255,255,.09);
      position:relative;
    }
    .hero-figure::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(90% 70% at 40% 10%, rgba(255,255,255,.12), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.14));
      pointer-events:none;
    }
    .hero-figure img{transition:transform 7s ease; filter:saturate(1.08) contrast(1.04)}
    @media (hover:hover){ .hero-figure:hover img{transform:scale(1.05)} }

    /* Panels */
    .statement .container{max-width:1040px}
    .panel{
      border:1px solid var(--panelbd);
      border-radius:22px;
      padding:clamp(18px,2.4vw,32px);
      box-shadow: var(--shadow2);
      background: var(--panelbg);
    }

    /* Fade-up */
    .fade-up{opacity:0;transform:translateY(28px) scale(.988);filter:blur(2px)}
    .fade-up.visible{opacity:1;transform:none;filter:none;transition:opacity .6s ease, transform .65s cubic-bezier(.2,.8,.2,1), filter .6s ease}

    /* KPIs */
    .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:.85rem;margin-top:1.05rem}
    .kpi{
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;padding:1rem 1rem;
      background:
        radial-gradient(120% 120% at 20% 0%, rgba(255,255,255,.07), transparent 55%),
        rgba(255,255,255,.02);
      text-align:center;
      box-shadow:0 16px 56px rgba(0,0,0,.20);
    }
    .kpi strong{display:block;font-size:1.62rem;color:#fff}
    .kpi span{font-size:.95rem;color:var(--muted2)}

    /* Results inline (desktop) ‚Äî upgraded layout */
    .result-panel{border-radius:22px;padding:clamp(18px,2.4vw,32px);margin-top:1rem;box-shadow: var(--shadow2);border:1px solid transparent}
    .is-red{background:linear-gradient(180deg, rgba(200,81,81,.22), rgba(18,10,10,.58));border-color:rgba(200,81,81,.58)}
    .is-yellow{background:linear-gradient(180deg, rgba(214,196,90,.18), rgba(20,18,8,.60));border-color:rgba(214,196,90,.55)}
    .is-green{background:linear-gradient(180deg, rgba(85,183,107,.14), rgba(7,12,9,.67));border-color:rgba(85,183,107,.52)}
    .result-title{font-size:clamp(1.26rem,2.2vw,1.68rem);font-weight:900;margin-bottom:.35rem;color:#fff}
    .result-grid{display:grid;gap:1rem;align-items:start}
    @media (min-width:1024px){
      .result-grid{grid-template-columns:1fr 360px;gap:1.1rem}
      .result-actions{
        position:sticky; top:104px;
        border:1px solid rgba(255,255,255,.12);
        border-radius:18px;
        padding:14px;
        background: rgba(10,14,22,.48);
        backdrop-filter: blur(10px) saturate(120%);
        box-shadow: var(--glow);
      }
    }
    .result-actions .btn{width:100%}

    /* Sticky CTA (mobile) */
    .sticky-cta{
      position:fixed; left:0; right:0; bottom:calc(14px + var(--safe-b)); z-index:860;
      display:none; justify-content:center;
      transform:translateY(100%); opacity:0;
      transition:transform .25s var(--ease),opacity .25s var(--ease)
    }
    .sticky-cta .inner{
      background:rgba(10,14,22,.98);
      border:1px solid rgba(233,211,148,.30);
      padding:.55rem;
      border-radius:999px;
      box-shadow:0 16px 54px rgba(0,0,0,.66)
    }
    @media (max-width:1023px){ .sticky-cta{display:flex} }

    .visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    dialog#zoom{width:min(92vw,1100px);border:none;padding:0;background:transparent}
    dialog#zoom::backdrop{background:rgba(0,0,0,.78);backdrop-filter:blur(2px)}
    .zoom-frame{position:relative;border-radius:18px;overflow:hidden;box-shadow: var(--shadow)}
    .zoom-close{touch-action:manipulation}

    footer{border-top:1px solid rgba(255,255,255,.08);padding:32px 0 72px}
    .footer-links{display:flex;flex-wrap:wrap;gap:.55rem;justify-content:center}
    .footer-links a{padding:.38rem .65rem;border-radius:999px;color:var(--muted2)}
    .footer-links a:hover{color:var(--text);background:rgba(255,255,255,.05)}
    .tiny{font-size:.9rem;color:var(--muted2);line-height:1.6}

    .figure{border-radius:28px;overflow:hidden;box-shadow:0 28px 92px rgba(0,0,0,.36);border:1px solid rgba(255,255,255,.10)}
    .portrait{
      max-width:560px;margin:18px auto 0;border-radius:18px;overflow:hidden;
      filter:grayscale(.82) contrast(1.06);
      border:1px solid rgba(255,255,255,.09);
      box-shadow:0 22px 78px rgba(0,0,0,.34)
    }

    .brands{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center}
    .badge{
      display:inline-flex;align-items:center;gap:.45rem;padding:.4rem .72rem;
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px;font-size:.92rem;color:var(--muted2);
      background:rgba(255,255,255,.02)
    }
    .badge::before{content:"";width:.55rem;height:.55rem;border-radius:50%;background:conic-gradient(from 210deg,var(--gold),#fff,var(--gold));box-shadow:0 0 0 3px rgba(230,208,138,.14)}
    .seal{background:#fff;border-radius:10px;padding:6px;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 1px 0 rgba(255,255,255,.05), 0 10px 30px rgba(0,0,0,.26)}

    .chapters{position:fixed;left:18px;top:120px;display:none;flex-direction:column;gap:12px;z-index:120}
    .chapters a{display:flex;align-items:center;gap:8px;color:var(--muted2);font-size:.9rem}
    .chapters a .dot{width:7px;height:7px;border-radius:999px;background:rgba(255,255,255,.22)}
    .chapters a[aria-current="true"] .dot{background:var(--gold)}
    .chapters a span{opacity:.0;transform:translateX(4px);transition:opacity .2s var(--ease), transform .2s var(--ease)}
    .chapters:hover a span{opacity:.9;transform:none}
    @media (min-width:1200px){ .chapters{display:flex} }

    @media (max-width:480px){
      .section{padding:36px 0}
      p{font-size:1.04rem;line-height:1.8}
      .container{padding-inline:16px}
      .panel{padding:18px}
    }

    .personas{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:clamp(.85rem,2.2vw,1.15rem);margin-top:.9rem}
    .card{
      border:1px solid rgba(255,255,255,.12);
      border-radius:22px;overflow:hidden;background:rgba(255,255,255,.02);
      box-shadow:0 20px 70px rgba(0,0,0,.30)
    }
    .card img{aspect-ratio: 3/2; object-fit:cover}
    .card .cap{padding:.9rem .95rem}
    .card .cap strong{display:block;margin-bottom:.25rem;color:#fff}

    .cases{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:clamp(.85rem,2.2vw,1.15rem)}
    .case{
      border:1px solid rgba(255,255,255,.12);
      border-radius:22px;padding:1.15rem;
      background: var(--panelbg);
      box-shadow:0 20px 70px rgba(0,0,0,.30)
    }
    .case h3{margin-bottom:.35rem}
    .case p{margin:0}

    .faq{max-width:1020px;margin-inline:auto}
    .faq details{
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;padding:.95rem 1.05rem;
      background:rgba(255,255,255,.02);
      box-shadow:0 18px 60px rgba(0,0,0,.24)
    }
    .faq details+details{margin-top:.75rem}
    .faq summary{cursor:pointer;font-weight:900;color:#fff;list-style:none}
    .faq summary::-webkit-details-marker{display:none}
    .faq .answer{margin-top:.55rem}

    .legend-title{
      font-size:clamp(1.08rem,2.8vw,1.28rem);
      font-weight:900;
      color:#fff;
      margin:0 0 .6rem;
    }

    /* CMP */
    .cmp-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      backdrop-filter:blur(2px);
      z-index:1000;
      display:none;
    }
    .cmp-backdrop.visible{display:block}

    .cmp-wrap{
      position:fixed; inset:auto 12px calc(12px + var(--safe-b)) 12px; z-index:1001;
      max-width:900px; margin-left:auto; margin-right:auto;
      background:rgba(10,14,22,.98);
      border:1px solid rgba(255,255,255,.16);
      border-radius:18px; padding:14px;
      box-shadow:0 18px 62px rgba(0,0,0,.62);
      display:none
    }
    .cmp-wrap.visible{display:block}
    .cmp-head{display:flex;align-items:center;justify-content:space-between;gap:.6rem;margin-bottom:.35rem}
    .cmp-title{font-weight:900}
    .cmp-text{font-size:.95rem;color:var(--muted);margin:.4rem 0}
    .cmp-actions{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.7rem}
    .cmp-actions .btn{min-height:44px}
    .cmp-toggle{display:flex;align-items:center;justify-content:space-between;border:1px solid rgba(255,255,255,.16);border-radius:12px;padding:.65rem .85rem;margin-top:.5rem;background:rgba(255,255,255,.02)}
    .cmp-toggle label{display:flex;flex-direction:column;gap:.15rem}

    /* Switch */
    .switch{position:relative;width:48px;height:28px;background:rgba(255,255,255,.18);border-radius:999px}
    .switch input{position:absolute;opacity:0}
    .switch i{position:absolute;top:3px;left:3px;width:22px;height:22px;background:rgba(255,255,255,.72);border-radius:50%;transition:.2s}
    .switch input:checked + i{left:23px;background:#111;box-shadow:0 0 0 2px rgba(230,208,138,.38)}

    .cmp-links{font-size:.9rem;color:var(--muted2);margin-top:.55rem}
    .cmp-links a{text-decoration:underline}

    /* Decision chips */
    .chips{display:flex;flex-wrap:wrap;gap:.55rem;justify-content:center;margin-top:.65rem}
    .chip{
      display:inline-flex;align-items:center;gap:.45rem;
      padding:.58rem .94rem;border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(255,255,255,.03);
      color:var(--text); font-weight:900; cursor:pointer;
      min-height:44px;
      -webkit-tap-highlight-color: transparent;
    }
    .chip[aria-pressed="true"]{
      border-color: rgba(230,208,138,.62);
      box-shadow: 0 0 0 3px rgba(230,208,138,.14);
      background: rgba(230,208,138,.08);
    }

    /* Ampel UI */
    .ampel-shell{max-width:1040px;margin-inline:auto}
    .ampel-head{display:flex;flex-direction:column;gap:.3rem}
    .ampel-meta{display:flex;flex-wrap:wrap;gap:.65rem;align-items:center;justify-content:space-between;margin-top:.6rem}
    .ampel-controls{display:flex;gap:.5rem;flex-wrap:wrap}
    .ampel-controls .btn{min-height:46px}
    .ampel-progress{display:flex;gap:.8rem;align-items:center}
    progress{width:100%;height:10px;border-radius:999px;overflow:hidden}
    progress::-webkit-progress-bar{background:rgba(255,255,255,.10);border-radius:999px}
    progress::-webkit-progress-value{background:linear-gradient(90deg,var(--gold),#fff)}
    .ampel-stepper{display:flex;align-items:center;justify-content:space-between;gap:.7rem;margin-top:.75rem}
    .ampel-stepper .btn{min-height:46px}

    input[type="email"]{
      background:rgba(255,255,255,.04);
      color:var(--text);
      border:1px solid rgba(255,255,255,.16);
      outline:none;
    }
    input[type="email"]::placeholder{color:rgba(210,220,245,.58)}

    /* ===== Native-like Bottom Sheet (mobile result) ===== */
    .sheet-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.62);
      backdrop-filter: blur(2px);
      z-index:2000;
      display:none;
    }
    .sheet-backdrop.visible{display:block}

    .sheet{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:2001;
      display:none;
      padding: 10px 10px calc(12px + var(--safe-b));
      pointer-events:none;
      touch-action:none;
    }
    .sheet.visible{display:block;pointer-events:auto}
    .sheet-card{
      max-width: 740px;
      margin: 0 auto;
      border-radius: 28px;
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(120% 120% at 20% 0%, rgba(255,255,255,.10), transparent 60%),
        rgba(10,14,22,.98);
      box-shadow: 0 28px 96px rgba(0,0,0,.70);
      overflow:hidden;
      transform: translateY(10px);
      will-change: transform;
    }
    .sheet.visible .sheet-card{
      animation: sheetIn .28s var(--ease) both;
    }
    @keyframes sheetIn{
      from{transform: translateY(28px); opacity:0}
      to{transform: translateY(0); opacity:1}
    }
    .sheet-handle{
      width: 54px; height: 5px;
      border-radius:999px;
      background: rgba(255,255,255,.22);
      margin: 10px auto 8px;
    }
    .sheet-head{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      padding: 6px 16px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .sheet-title{font-weight:900;color:#fff}
    .sheet-sub{color:var(--muted2);font-size:.95rem;margin-top:.15rem}
    .sheet-close{
      min-width:44px; min-height:44px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.05);
      color:#fff;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .sheet-body{padding: 12px 16px 16px; max-height:min(74vh, 760px); overflow:auto}
    .sheet-actions{display:grid;gap:.55rem;margin-top:.85rem}
    .sheet-actions .btn{width:100%}
    .sheet-inline{margin-top:.8rem}
    .sheet-note{font-size:.9rem;color:var(--muted2);line-height:1.55;text-align:center;margin-top:.8rem}

    @media (min-width:1024px){
      .sheet, .sheet-backdrop{display:none!important}
    }
  </style>
</head>

<body>
  <div class="progress" id="progress" aria-hidden="true"></div>
  <a href="#main" class="skip-link">Zum Inhalt springen</a>
  <div class="space" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- Chapter dots (desktop) -->
  <nav class="chapters" aria-label="Kapitel">
    <a href="#hero" data-chapter="hero"><span>Eintritt</span><i class="dot" aria-hidden="true"></i></a>
    <a href="#proof" data-chapter="spiegel"><span>Lebenslagen</span><i class="dot"></i></a>
    <a href="#allfinanz" data-chapter="struktur"><span>Struktur</span><i class="dot"></i></a>
    <a href="#ablauf" data-chapter="ablauf"><span>Ablauf</span><i class="dot"></i></a>
    <a href="#ampel-check" data-chapter="check"><span>Check</span><i class="dot"></i></a>
    <a href="#final-h" data-chapter="ruhe"><span>Ruhe</span><i class="dot"></i></a>
  </nav>

  <header role="banner">
    <div class="container header-bar">
      <a class="brand" href="#hero" aria-label="Startseite">
        <div class="brand-top">
          <span class="brand-dot" aria-hidden="true"></span>
          Heiko Haerter
          <img
            src="https://static.wixstatic.com/media/4e46cf_c2e98e1f192a448d95f2b8ae9bdd07ce~mv2.png"
            alt="" width="96" height="22"
            style="height:22px;width:auto;opacity:.92"
            loading="lazy" decoding="async">
        </div>
        <span class="micro">Allfinanz ¬∑ Entscheidungslogik ¬∑ Region Stuttgart</span>
      </a>

      <nav class="nav" aria-label="Hauptnavigation">
        <a class="link" href="#proof">Lebenslagen</a>
        <a class="link" href="#ablauf">Ablauf</a>
        <a class="link" href="#firma">Firmen</a>
        <a class="link" href="/impressum">Impressum</a>
        <a class="link" href="/datenschutz">Datenschutz</a>
        <a class="btn btn-primary" href="#ampel-check" data-start>Eigene Lage einordnen (2 Min)</a>
      </nav>

      <button class="menu-btn" id="menuBtn" type="button" aria-label="Men√º √∂ffnen" aria-controls="mnav" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Mobile menu -->
  <div class="mnav-backdrop" id="mnavBackdrop" aria-hidden="true"></div>
  <div class="mnav" id="mnav" role="dialog" aria-modal="true" aria-label="Navigation" aria-hidden="true">
    <div class="head">
      <div style="display:flex;flex-direction:column">
        <div style="font-weight:900">Navigation</div>
        <div class="micro">Schnell dorthin, wo‚Äôs wichtig ist.</div>
      </div>
      <button class="btn btn-ghost small" id="mnavClose" type="button" aria-label="Men√º schlie√üen">‚úï</button>
    </div>
    <div class="list">
      <a href="#proof" data-mnav><span class="t">Lebenslagen</span><span class="s">Typische Situationen</span></a>
      <a href="#ablauf" data-mnav><span class="t">Ablauf</span><span class="s">In 5 Schritten</span></a>
      <a href="#firma" data-mnav><span class="t">Firmen</span><span class="s">Unternehmer-Themen</span></a>
      <a href="#ampel-check" data-start data-mnav><span class="t">2-Minuten Check</span><span class="s">Ampel + n√§chster Schritt</span></a>
      <a href="/impressum"><span class="t">Impressum</span><span class="s">Rechtliches</span></a>
      <a href="/datenschutz"><span class="t">Datenschutz</span><span class="s">Transparenz</span></a>
      <div class="cta">
        <a class="btn btn-primary" href="#ampel-check" data-start data-mnav>Eigene Lage einordnen</a>
      </div>
    </div>
  </div>

  <main id="main" role="main">
    <!-- HERO -->
    <section id="hero" class="hero section fade-up" aria-labelledby="hero-title">
      <div class="container hero-grid">
        <div class="stack">
          <p class="micro eyebrow">F√ºr Menschen mit Verantwortung ‚Äì privat &amp; unternehmerisch</p>
          <h1 id="hero-title" class="signature">Damit Finanzen nicht st√§ndig im Kopf sind.</h1>
          <p class="hero-sub">Ordnung. Reihenfolge. Ruhe ‚Äì statt To-do-Druck und Bauchgef√ºhl.</p>

          <div class="kpis" aria-label="Vertrauenswerte">
            <div class="kpi"><strong data-count="1200">0</strong><span>begleitete Entscheidungen</span></div>
            <div class="kpi"><strong data-count="10">0</strong><span>Jahre dokumentiert</span></div>
            <div class="kpi"><strong data-count="2">0</strong><span>Min. f√ºr Einordnung</span></div>
          </div>
          <p class="micro" style="margin-top:.45rem;opacity:.9">
            Z√§hlweise: interne Beratungsdokumentationen (anonymisiert) seit 2016.
          </p>

          <div class="stack" style="margin-top:.95rem">
            <div class="grid" style="gap:.55rem">
              <button class="btn btn-primary" id="startCheckHero" type="button" data-start data-hero>Eigene Lage einordnen (2 Min)</button>
              <a class="btn btn-ghost" href="#transparenz">So l√§uft‚Äôs ab (mit Exit-Punkten)</a>
            </div>
            <small class="micro" style="opacity:.9">Kein Verkauf im Erstgespr√§ch. Wenn nichts zu tun ist, ist das das Ergebnis.</small>
          </div>
        </div>

        <figure class="hero-figure" aria-label="Ruhige Beratungsszene">
          <img data-zoom
            src="https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=1400"
            srcset="
              https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=960 960w,
              https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=1400 1400w,
              https://static.wixstatic.com/media/4e46cf_3e28515e9da04a32857d0eb15a2a300a~mv2.png?width=2000 2000w
            "
            sizes="(min-width:1024px) 56vw, 96vw"
            alt="Ruhige, fokussierte Beratung im B√ºro" width="1400" height="840"
            loading="eager" decoding="async" fetchpriority="high">
        </figure>
      </div>
    </section>

    <section class="statement section fade-up panel" aria-labelledby="ichbin-h">
      <div class="container">
        <h2 id="ichbin-h">Ich bin Heiko Haerter.</h2>
        <p>Ich begleite Menschen und Unternehmer dabei, ihre Finanzen so zu ordnen, dass Entscheidungen leichter werden ‚Äì und nicht st√§ndig im Hinterkopf bleiben.</p>
        <p class="micro">Kein L√§rm. Kein Produkt-Aktionismus. Sondern Reihenfolge, die tr√§gt.</p>
      </div>
    </section>

    <section class="statement section fade-up" aria-labelledby="what-h">
      <div class="container">
        <h2 id="what-h">Was hier konkret passiert</h2>
        <p><strong>1 ¬∑ √úberblick:</strong> In 30‚Äì45 Minuten kl√§ren wir, ob gerade etwas Wichtiges fehlt ‚Äì oder nicht.</p>
        <p><strong>2 ¬∑ Struktur:</strong> Einkommen, Absicherung, R√ºcklagen, Familie, Vorsorge so ordnen, dass sie zusammenpassen.</p>
        <p><strong>3 ¬∑ Begleitung:</strong> Umsetzung, Dokumentation, j√§hrlicher Check ‚Äì damit nichts untergeht.</p>
        <p class="micro">Nicht mehr, nicht komplizierter ‚Äì sondern passend zu deinem Leben.</p>
      </div>
    </section>

    <section class="statement section fade-up panel" aria-labelledby="warum-begleitung-h">
      <div class="container">
        <h2 id="warum-begleitung-h">Warum Begleitung hier Sinn macht</h2>
        <p>Probleme entstehen selten, weil Menschen nichts tun ‚Äì sondern weil Themen <em>einzeln</em> geregelt werden und die Reihenfolge fehlt.</p>
        <p class="micro">Besonders dann, wenn Einkommen, Familie und Absicherung voneinander abh√§ngen. Ein Verm√∂gensberater entscheidet nicht f√ºr dich ‚Äì er h√§lt die Reihenfolge, denkt mit und sorgt daf√ºr, dass nichts Wichtiges untergeht.</p>
      </div>
    </section>

    <section class="statement section fade-up" aria-label="Hinweis">
      <div class="container">
        <p class="micro"><strong>Diese Seite ist kein Angebot.</strong> Sie hilft dir einzusch√§tzen, ob gerade √ºberhaupt etwas zu tun ist. Keine Rechts- oder Steuerberatung.</p>
      </div>
    </section>

    <section id="proof" class="section fade-up" aria-labelledby="proof-h">
      <div class="container">
        <h2 id="proof-h">Typische Situationen &amp; wer hier landet</h2>
        <div class="personas">
          <figure class="card">
            <img src="https://static.wixstatic.com/media/4e46cf_47b12c3342f14ee6a4e44033f122ff04~mv2.jpeg?width=1200" alt="Junges Paar" width="1200" height="800" loading="lazy" decoding="async">
            <figcaption class="cap"><strong>Junges Paar</strong><span class="micro">Viel geregelt ‚Äì aber ohne klares Gef√ºhl f√ºr Vollst√§ndigkeit. Ergebnis: Reihenfolge, Ruhe, kein Aktionismus.</span></figcaption>
          </figure>
          <figure class="card">
            <img src="https://static.wixstatic.com/media/4e46cf_29faaeeebc8949a39d678147a16fb488~mv2.jpeg?width=1200" alt="Berufliche Aufsteigerin" width="1200" height="800" loading="lazy" decoding="async">
            <figcaption class="cap"><strong>Berufliche Aufsteigerin</strong><span class="micro">Mehr Verantwortung ‚Äì klare Priorit√§ten, passende Absicherung.</span></figcaption>
          </figure>
          <figure class="card">
            <img src="https://static.wixstatic.com/media/4e46cf_11b2987a8b88423da19e51813b3f8e8f~mv2.jpeg?width=1200" alt="Selbstst√§ndiger" width="1200" height="800" loading="lazy" decoding="async">
            <figcaption class="cap"><strong>Der Selbstst√§ndige</strong><span class="micro">Lief jahrelang gut ‚Äì bis klar wurde, dass ein Ausfall alles gleichzeitig getroffen h√§tte. Ergebnis: gemeinsame Landkarte, Zust√§ndigkeiten.</span></figcaption>
          </figure>
        </div>
      </div>
    </section>

    <section class="statement section fade-up" aria-labelledby="sp-h">
      <div class="container">
        <h2 id="sp-h" class="visually-hidden">Vertrauensanker</h2>
        <p class="micro">√úber viele Jahre begleitete Entscheidungen ‚Äì √∂ffentlich einsehbar.</p>
        <div class="brands" aria-label="Externe Vertrauenssignale">
          <a class="badge" href="/bewertungen" rel="nofollow">Bewertungen anschauen</a>
          <span class="badge">üìç Region Stuttgart &amp; Online</span>
          <span class="seal"><img src="https://static.wixstatic.com/shapes/4e46cf_077e599467a543daa505ac661e0366a2.svg" alt="Deutschlands Kundenchampions 2025 Siegel" width="120" height="36" loading="lazy" decoding="async"></span>
          <span class="seal"><img src="https://static.wixstatic.com/media/4e46cf_bb291e43f4e548aead72419e831d68cf~mv2.png" alt="Bundesverband Deutscher Verm√∂gensberater Siegel" width="120" height="36" loading="lazy" decoding="async"></span>
        </div>
      </div>
    </section>

    <section id="allfinanz" class="statement section fade-up" aria-labelledby="value-h">
      <div class="container">
        <h2 id="value-h" class="signature">Finanzen sollten das Leben einfacher machen ‚Äì nicht komplizierter.</h2>
        <p>Einkommen, Absicherung, R√ºcklagen, Familie, Vorsorge. Nicht als einzelne Themen, sondern so, dass sie zusammenpassen.</p>
        <p class="micro" style="margin-top:.2rem">Ich arbeite strukturiert ‚Äì damit Entscheidungen ruhig getroffen werden k√∂nnen.</p>
        <p class="micro" style="margin-top:.2rem">Die meisten Fehler entstehen nicht durch falsche Produkte ‚Äì sondern durch fehlende Reihenfolge.</p>

        <figure class="portrait">
          <img src="https://static.wixstatic.com/media/4e46cf_e4d34f1837d445c7afee054525608197~mv2.png"
               alt="Heiko Haerter ‚Äì ruhig im Gespr√§ch, neutraler Hintergrund" width="1200" height="800" loading="lazy" decoding="async">
        </figure>

        <figure class="figure" style="max-width:940px;margin:1.25rem auto 0">
          <img data-zoom
            src="https://static.wixstatic.com/media/4e46cf_e325af7e02af4aba8f6eba246ff749f3~mv2.png?width=1400"
            srcset="
              https://static.wixstatic.com/media/4e46cf_e325af7e02af4aba8f6eba246ff749f3~mv2.png?width=900 900w,
              https://static.wixstatic.com/media/4e46cf_e325af7e02af4aba8f6eba246ff749f3~mv2.png?width=1400 1400w
            " sizes="(min-width:1024px) 64vw, 94vw"
            alt="Struktur der Allfinanz-Beratung ‚Äì Entscheidungsbereiche im √úberblick" width="1400" height="880" loading="lazy" decoding="async">
        </figure>
      </div>
    </section>

    <section class="section fade-up" aria-labelledby="formate-h">
      <div class="container">
        <h2 id="formate-h">Einstieg</h2>
        <p><strong>Kurz-Check (30‚Äì45 Min.):</strong> Einmal gemeinsam durchgehen, ob alles Wesentliche geregelt ist.</p>
        <p><strong>Finanz-√úberblick (90 Min.):</strong> Struktur aufsetzen ‚Äì damit nichts Wichtiges liegen bleibt.</p>
        <p><strong>Laufende Entlastung:</strong> Umsetzung, Dokumentation, Ruhe im Alltag.</p>

        <figure class="figure" style="max-width:920px;margin:1rem auto 0">
          <img data-zoom
            src="https://static.wixstatic.com/media/4e46cf_c9c0dcdd4f3e47d9983ee35dab5e3563~mv2.png?width=1400"
            srcset="
              https://static.wixstatic.com/media/4e46cf_c9c0dcdd4f3e47d9983ee35dab5e3563~mv2.png?width=900 900w,
              https://static.wixstatic.com/media/4e46cf_c9c0dcdd4f3e47d9983ee35dab5e3563~mv2.png?width=1400 1400w
            " sizes="(min-width:1024px) 62vw, 94vw"
            alt="Konzeptarbeit: Entscheidungslogik f√ºr Kunden ‚Äì diese Seite ist genau aus diesem Grund entstanden" width="1400" height="900" loading="lazy" decoding="async">
        </figure>
      </div>
    </section>

    <section class="section fade-up panel" aria-labelledby="cases-h">
      <div class="container">
        <h2 id="cases-h">Drei echte Ver√§nderungen in wenigen Wochen</h2>
        <div class="cases">
          <div class="case">
            <h3>‚ÄûWir wussten endlich, was zuerst kommt.‚Äú</h3>
            <p class="micro">Junges Paar ¬∑ Arbeitskraft priorisiert, Haftung gekl√§rt, R√ºcklagen automatisiert. Ergebnis: ruhiger schlafen.</p>
          </div>
          <div class="case">
            <h3>‚ÄûEndlich klar, was wir weglassen k√∂nnen.‚Äú</h3>
            <p class="micro">F√ºhrungskraft ¬∑ Vier Vertr√§ge zusammengef√ºhrt, doppelte Risiken raus, klare Unterlagenstruktur.</p>
          </div>
          <div class="case">
            <h3>‚ÄûEin Ausfall h√§tte die Firma mitgerissen ‚Äì jetzt nicht mehr.‚Äú</h3>
            <p class="micro">Selbstst√§ndig ¬∑ GF-Absicherung, Notfallplan, Zust√§ndigkeiten. Ergebnis: Verantwortung tragf√§hig.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="ablauf" class="section fade-up" aria-labelledby="steps-h">
      <div class="container">
        <h2 id="steps-h">Ablauf in f√ºnf Schritten</h2>
        <p class="micro">Von Einordnung bis Begleitung ‚Äì klar dokumentiert.</p>

        <figure class="figure" style="max-width:1020px;margin:1rem auto 0">
          <img data-zoom
            src="https://static.wixstatic.com/media/4e46cf_31d73a6acca04e0cbd2f030d672ad4ce~mv2.png?width=1400"
            srcset="
              https://static.wixstatic.com/media/4e46cf_31d73a6acca04e0cbd2f030d672ad4ce~mv2.png?width=600 600w,
              https://static.wixstatic.com/media/4e46cf_31d73a6acca04e0cbd2f030d672ad4ce~mv2.png?width=980 980w,
              https://static.wixstatic.com/media/4e46cf_31d73a6acca04e0cbd2f030d672ad4ce~mv2.png?width=1400 1400w
            " sizes="(min-width:1024px) 70vw, 100vw"
            alt="Der Prozess in f√ºnf Schritten" width="1400" height="900" loading="lazy" decoding="async">
        </figure>
      </div>
    </section>

    <section id="firma" class="section fade-up" aria-labelledby="firma-h">
      <div class="container">
        <h2 id="firma-h">F√ºr Firmenkunden</h2>
        <p><strong>Firmensafe-Sprint:</strong> Ist-Analyse ‚Üí Priorit√§ten ‚Üí Sofortma√ünahmen ‚Üí Roadmap.</p>
        <p><strong>Bausteine:</strong> GF-Absicherung, bAV/bKV, Haftung/Sach, Rechtsschutz, Benefits.</p>
        <p><strong>Unternehmer-Ampel:</strong> Krankheit, Ausfall, Wachstum ‚Äì erst ordnen, dann entscheiden.</p>
        <div style="margin-top:.7rem">
          <a class="btn btn-ghost" href="#ampel-check" data-start>Eigene Lage einordnen (2 Min)</a>
        </div>
      </div>
    </section>

    <section id="ampel-check" class="section fade-up" aria-labelledby="ampel-h">
      <div class="container ampel-shell">
        <div class="ampel-head">
          <h2 id="ampel-h">2-Minuten-Check</h2>
          <p class="micro">Drei Fragen. Danach: Ampel + n√§chster Schritt. Kein Terminzwang, kein Push.</p>
        </div>

        <div class="panel" style="margin-top:1rem">
          <div id="check-start">
            <div class="stack" style="text-align:center;align-items:center">
              <p class="micro" style="max-width:64ch">
                Tipp: Nimm die Antwort, die sich <em>am ehesten</em> richtig anf√ºhlt. Perfekt ist nicht n√∂tig.
              </p>
              <button class="btn btn-primary" type="button" data-start id="checkStartBtn">Check starten</button>
              <p class="micro" style="opacity:.9">Du kannst jederzeit abbrechen.</p>
            </div>
          </div>

          <form id="check-steps" style="display:none" novalidate>
            <div class="ampel-meta" aria-label="Check Status">
              <div class="ampel-progress" style="width:min(560px,100%)">
                <div class="micro" id="stepLabel" aria-live="polite" style="min-width:140px;font-weight:900">Schritt 1 von 3</div>
                <progress id="progressBar" value="0" max="3" aria-label="Fortschritt"></progress>
              </div>
              <div class="ampel-controls">
                <button class="btn btn-ghost small" type="button" id="checkCancel">Abbrechen</button>
              </div>
            </div>

            <div class="micro" id="stepHint" style="margin-top:.55rem;opacity:.95">Kurzer Eindruck reicht.</div>

            <label class="micro" style="display:flex;gap:.55rem;align-items:center;margin-top:.65rem">
              <input type="checkbox" id="autoAdvance" checked>
              <span>Automatisch weiter nach Auswahl</span>
            </label>

            <fieldset class="step" data-step="1" style="display:none;margin-top:1rem">
              <legend id="q1label" class="legend-title">1 ¬∑ 6 Monate Ausfall ‚Äì wie stabil w√§re euer Einkommen?</legend>
              <p class="visually-hidden" id="q1hint">W√§hle eine Option.</p>
              <div class="stack" role="radiogroup" aria-labelledby="q1label" aria-describedby="q1hint">
                <label class="btn small"><input class="visually-hidden" type="radio" name="q1" value="1"> <span>Wir h√§tten ein echtes Problem</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q1" value="2"> <span>Wir k√§men durch, aber eng</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q1" value="3"> <span>Stabil aufgestellt</span></label>
              </div>
            </fieldset>

            <fieldset class="step" data-step="2" style="display:none;margin-top:1rem">
              <legend id="q2label" class="legend-title">2 ¬∑ Wie <em>leicht</em> findest du wichtige Unterlagen?</legend>
              <p class="visually-hidden" id="q2hint">W√§hle eine Option.</p>
              <div class="stack" role="radiogroup" aria-labelledby="q2label" aria-describedby="q2hint">
                <label class="btn small"><input class="visually-hidden" type="radio" name="q2" value="1"> <span>Ich suche lange</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q2" value="2"> <span>Meistens</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q2" value="3"> <span>Zuverl√§ssig</span></label>
              </div>
            </fieldset>

            <fieldset class="step" data-step="3" style="display:none;margin-top:1rem">
              <legend id="q3label" class="legend-title">3 ¬∑ ‚ÄûZukunft &amp; Alter‚Äú ‚Äì wie f√ºhlt es sich an?</legend>
              <p class="visually-hidden" id="q3hint">W√§hle eine Option.</p>
              <div class="stack" role="radiogroup" aria-labelledby="q3label" aria-describedby="q3hint">
                <label class="btn small"><input class="visually-hidden" type="radio" name="q3" value="1"> <span>Unsicher</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q3" value="2"> <span>Teilweise rund</span></label>
                <label class="btn small"><input class="visually-hidden" type="radio" name="q3" value="3"> <span>Gut</span></label>
              </div>
            </fieldset>

            <div class="ampel-stepper">
              <button class="btn btn-ghost" type="button" id="checkBack" disabled>Zur√ºck</button>
              <button class="btn btn-primary" type="button" id="checkNext" disabled>Weiter</button>
            </div>
          </form>

          <!-- Desktop inline result (mobile uses bottom sheet) -->
          <div id="check-result" style="display:none;margin-top:1.4rem" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <section class="statement section fade-up" aria-labelledby="neuro-h">
      <div class="container" style="max-width:960px">
        <h2 id="neuro-h" class="signature">Zu lange nichts tun wird meist teurer als einmal sauber hinschauen.</h2>
      </div>
    </section>

    <section class="section fade-up" aria-labelledby="faq-h">
      <div class="container faq">
        <h2 id="faq-h">H√§ufige Fragen</h2>
        <details>
          <summary>Was kostet die Zusammenarbeit?</summary>
          <div class="answer micro">Erstgespr√§ch kostenlos. Laufende Begleitung erfolgt ‚Äì sofern Produkte abgeschlossen werden ‚Äì auf Provisionsbasis √ºber Produktpartner (Generali-Gruppe, ADVOCARD). Keine Annahme von Kundengeldern.</div>
        </details>
        <details>
          <summary>Ist das Beratung oder Verkauf?</summary>
          <div class="answer micro">Erst Ordnung, Priorit√§t, Reihenfolge. Dann triffst du Entscheidungen. Auch ‚Äûnichts tun‚Äú ist ein valides Ergebnis.</div>
        </details>
        <details>
          <summary>Kann das komplett online stattfinden?</summary>
          <div class="answer micro">Ja. Online oder vor Ort (Region Stuttgart) ‚Äì strukturiert dokumentiert.</div>
        </details>
      </div>
    </section>

    <section class="statement section fade-up" aria-labelledby="final-h">
      <div class="container" style="text-align:center;max-width:900px">
        <h2 id="final-h">Einmal sauber sortieren. Dann wieder Ruhe haben.</h2>
        <p>Einmal pr√ºfen. Danach nicht mehr dran denken m√ºssen.</p>
        <div class="stack" style="align-items:center;margin-top:.5rem">
          <div class="grid" style="gap:.55rem;max-width:560px;width:100%;margin-inline:auto">
            <button class="btn btn-primary" id="ctaFinal" type="button" data-start>Eigene Lage einordnen (2 Min)</button>
            <a class="btn btn-ghost" href="https://wa.me/4917660408380?text=Hi%20Heiko%2C%20kurz%20pr%C3%BCfen%2C%20ob%20alles%20passt." target="_blank" rel="noopener noreferrer">WhatsApp (kurz)</a>
          </div>
          <p class="micro" style="margin-top:.85rem">
            DVAG-System: Dokumentation, langfristige Betreuung, und L√∂sungen, die auch in 10 Jahren noch nachvollziehbar sind.
          </p>
        </div>
      </div>
    </section>

    <section id="transparenz" class="section fade-up panel" aria-labelledby="dvag-h">
      <div class="container">
        <h2 id="dvag-h">Transparenz ‚Äì bevor wir sprechen</h2>
        <p><strong>DVAG-System:</strong> Struktur, damit Entscheidungen langfristig betreubar bleiben.</p>
        <p class="micro" style="margin-top:.35rem">F√ºr dich hei√üt das: Entscheidungen werden nachvollziehbar dokumentiert ‚Äì und L√∂sungen bleiben betreubar, auch in 10 oder 20 Jahren.</p>
        <p><strong>Verkauf?</strong> Nein. Ein Gespr√§ch endet mit einer Entscheidung ‚Äì auch mit der, nichts zu tun.</p>
        <p><strong>Skepsis?</strong> Willkommen. Skepsis ist kein Problem ‚Äì Unklarheit schon.</p>
        <p class="micro" style="margin-top:.7rem"><strong>Hinweis:</strong> Keine Rechts- oder Steuerberatung. Entscheidungen bitte erst nach vollst√§ndiger Datengrundlage treffen.</p>
      </div>
    </section>
  </main>

  <footer role="contentinfo">
    <div class="container" style="text-align:center">
      <div class="footer-links" style="margin-bottom:10px">
        <a href="/entscheidungsarchitektur.html">Entscheidungslogik</a>
        <a href="/arbeitskraft-absicherung.html">Arbeitskraft</a>
        <a href="/unternehmer-absicherung.html">Unternehmer</a>
        <a href="/finanzielle-reihenfolge.html">Reihenfolge</a>
        <a href="https://www.linkedin.com/in/heiko-haerter-3755b2260/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
        <a href="https://www.xing.com/profile/Heiko_Haerter3" target="_blank" rel="noopener noreferrer">Xing</a>
        <a href="https://www.instagram.com/heiko.haerter.coach/" target="_blank" rel="noopener noreferrer">Instagram</a>
        <a href="/impressum">Impressum</a>
        <a href="/datenschutz">Datenschutz</a>
        <a href="/barrierefreiheit">Barrierefreiheit</a>
        <a href="https://outlook.office.com/book/HeikoHaerter@dvag02.onmicrosoft.com/?ismsaljsauthenabled" rel="nofollow noopener noreferrer">Kurz-Check buchen</a>
        <a href="#" id="openCmp">Cookie-Einstellungen</a>
      </div>

      <div class="tiny" style="margin-bottom:8px">
        ¬© <span id="yearNow">2026</span> Heiko Haerter ¬∑ Robert-Bosch-Str. 1 ¬∑ 71277 Rutesheim ¬∑
        <a href="tel:+4917660408380">+49&nbsp;176&nbsp;60408380</a> ¬∑
        <a href="mailto:Heiko.Haerter@dvag.de">Heiko.Haerter@dvag.de</a>
      </div>

      <div class="tiny" style="max-width:1020px;margin-inline:auto">
        <strong>Status/Transparenz:</strong> Gebundener Vermittler gem. ¬ß 34d Abs. 7 GewO. T√§tigkeit auf Provisionsbasis
        (Generali-Gruppe, ADVOCARD). Keine Kundengelderannahme. Chancen &amp; Risiken ausgewogen. Entscheidungen erst nach vollst√§ndiger Datenlage.
      </div>
    </div>
  </footer>

  <!-- Sticky Mobile CTA -->
  <div class="sticky-cta" id="stickyCTA" aria-hidden="true">
    <div class="inner">
      <button class="btn btn-primary" type="button" id="stickyBtn" data-ctx="sticky" aria-label="N√§chster Schritt" tabindex="-1">N√§chster Schritt</button>
    </div>
  </div>

  <!-- Lightbox -->
  <dialog id="zoom" aria-label="Bildanzeige" aria-modal="true" role="dialog">
    <div class="zoom-frame">
      <button class="zoom-close" type="button" autofocus aria-label="Schlie√üen"
        style="position:absolute;top:10px;right:10px;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.45);color:#fff;border-radius:999px;padding:.45rem .75rem;cursor:pointer">
        Schlie√üen ‚úï
      </button>
      <img class="zoom-img" alt="" />
    </div>
  </dialog>

  <!-- Native Bottom Sheet (mobile result) -->
  <div class="sheet-backdrop" id="sheetBackdrop" aria-hidden="true"></div>
  <div class="sheet" id="sheet" aria-hidden="true">
    <div class="sheet-card" id="sheetCard" role="dialog" aria-modal="true" aria-label="Ergebnis">
      <div class="sheet-handle" aria-hidden="true"></div>
      <div class="sheet-head">
        <div>
          <div class="sheet-title" id="sheetTitle">Ergebnis</div>
          <div class="sheet-sub" id="sheetSub">‚Äî</div>
        </div>
        <button class="sheet-close" id="sheetClose" type="button" aria-label="Schlie√üen">‚úï</button>
      </div>
      <div class="sheet-body" id="sheetBody"></div>
    </div>
  </div>

  <!-- CMP Backdrop -->
  <div class="cmp-backdrop" id="cmpBackdrop" aria-hidden="true"></div>

  <!-- CMP -->
  <div class="cmp-wrap" id="cmp" role="dialog" aria-modal="true" aria-labelledby="cmpTitle" aria-describedby="cmpText" aria-hidden="true">
    <div class="cmp-head">
      <div class="cmp-title" id="cmpTitle">Datenschutz & Cookies</div>
      <button class="btn btn-ghost small" id="cmpClose" aria-label="Schlie√üen">‚úï</button>
    </div>
    <div class="cmp-text" id="cmpText">
      Wir verwenden notwendige Cookies, um diese Seite zu betreiben. F√ºr <strong>Statistik (Analytics)</strong> und <strong>Marketing</strong> bitten wir um Ihre Einwilligung.
      Sie k√∂nnen diese jederzeit unter ‚ÄûCookie-Einstellungen‚Äú widerrufen. Details in unserer <a href="/datenschutz" target="_blank" rel="noopener noreferrer">Datenschutzerkl√§rung</a>.
    </div>
    <div class="cmp-toggle">
      <label><strong>Notwendig</strong><span class="micro">immer aktiv ‚Äì technisch erforderlich</span></label>
      <span class="switch" aria-hidden="true"><input type="checkbox" checked disabled><i></i></span>
    </div>
    <div class="cmp-toggle">
      <label for="cmpAnalytics"><strong>Statistik (Analytics)</strong><span class="micro">anonymisierte Nutzungsstatistik</span></label>
      <span class="switch"><input id="cmpAnalytics" type="checkbox" aria-controls="cmp" aria-label="Analytics aktivieren"><i></i></span>
    </div>
    <div class="cmp-toggle">
      <label for="cmpMarketing"><strong>Marketing</strong><span class="micro">z. B. Klaviyo Onsite</span></label>
      <span class="switch"><input id="cmpMarketing" type="checkbox" aria-controls="cmp" aria-label="Marketing aktivieren"><i></i></span>
    </div>
    <div class="cmp-actions">
      <button class="btn btn-ghost" id="cmpReject">Nur notwendig</button>
      <button class="btn" id="cmpSave">Auswahl speichern</button>
      <button class="btn btn-primary" id="cmpAccept">Alle akzeptieren</button>
    </div>
    <div class="cmp-links">
      <a href="/impressum" target="_blank" rel="noopener noreferrer">Impressum</a> ¬∑
      <a href="/datenschutz" target="_blank" rel="noopener noreferrer">Datenschutz</a>
    </div>
  </div>

  <!-- ========= CONFIG + Consent-gated loader ========= -->
  <script>
    // ====== CONFIG ======
    const GA_ID = 'G-XXXXXXXXXX'; // set real ID; stays inert if placeholder
    const KLAVIYO_COMPANY_ID = 'T7wryA';
    const AMPEL_VERSION = 'v1';
    const PAGE_VARIANT = 'decision-space-6.4';

    function loadScriptOnce(url, attrs = {}) {
      if (document.querySelector('script[data-src="'+url+'"], script[src="'+url+'"]')) return;
      const s = document.createElement('script');
      s.src = url; s.async = true;
      Object.entries(attrs).forEach(([k,v]) => s.setAttribute(k, v));
      s.setAttribute('data-src', url);
      document.head.appendChild(s);
    }

    function initGA() {
      if (!GA_ID || String(GA_ID).includes('XXXX')) return;
      if (window.__cmpState.src.ga) return;
      loadScriptOnce(`https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(GA_ID)}`);
      gtag('js', new Date());
      gtag('config', GA_ID, { send_page_view: true, anonymize_ip: true });
      window.__cmpState.src.ga = true;
    }

    function initKlaviyo(){
      if (window.__cmpState.src.klaviyo) return;
      loadScriptOnce(`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${encodeURIComponent(KLAVIYO_COMPANY_ID)}`);
      window.__cmpState.src.klaviyo = true;
      window.klaviyo = window.klaviyo || [];
    }

    function applyConsent(opts) {
      const { analytics, marketing } = opts;
      window.__cmpState.analytics = !!analytics;
      window.__cmpState.marketing = !!marketing;
      window.__cmpState.ts = new Date().toISOString();

      gtag('consent', 'update', {
        analytics_storage: analytics ? 'granted' : 'denied',
        ad_storage: marketing ? 'granted' : 'denied',
        ad_user_data: marketing ? 'granted' : 'denied',
        ad_personalization: marketing ? 'granted' : 'denied'
      });

      if (analytics) initGA();
      if (marketing) initKlaviyo();

      try { localStorage.setItem('hh_cmp', JSON.stringify(window.__cmpState)); } catch(_) {}
    }
    window.__applyConsent = applyConsent;

    // CMP UI
    (function(){
      const LS_KEY = 'hh_cmp';
      const cmp = document.getElementById('cmp');
      const backdrop = document.getElementById('cmpBackdrop');
      const openBtn = document.getElementById('openCmp');
      const closeBtn = document.getElementById('cmpClose');
      const a = document.getElementById('cmpAnalytics');
      const m = document.getElementById('cmpMarketing');
      const accept = document.getElementById('cmpAccept');
      const reject = document.getElementById('cmpReject');
      const save = document.getElementById('cmpSave');

      const main = document.getElementById('main');
      const header = document.querySelector('header');
      const footer = document.querySelector('footer');

      const focusables = () => Array.from(cmp.querySelectorAll('button,[href],input:not([disabled])'))
        .filter(el => el.offsetParent !== null);

      let lastFocus = null;

      function setPageInert(on){
        try{ main?.toggleAttribute('inert', !!on); }catch(_){}
        try{ header?.toggleAttribute('inert', !!on); }catch(_){}
        try{ footer?.toggleAttribute('inert', !!on); }catch(_){}
        try{ cmp?.removeAttribute('inert'); }catch(_){}
      }

      function show(v){
        const on = !!v;
        cmp.classList.toggle('visible', on);
        cmp.setAttribute('aria-hidden', on ? 'false' : 'true');

        backdrop.classList.toggle('visible', on);
        backdrop.setAttribute('aria-hidden', on ? 'false' : 'true');

        if(on){
          lastFocus = document.activeElement;
          setPageInert(true);
          document.body.style.overflow='hidden';
          const f = focusables()[0]; f && f.focus();
        }else{
          setPageInert(false);
          document.body.style.overflow='';
          lastFocus && lastFocus.focus?.();
        }
      }

      function closeAsNecessary(){
        a.checked = false; m.checked = false;
        applyConsent({ analytics:false, marketing:false });
        show(false);
      }

      function trap(e){
        if(!cmp.classList.contains('visible')) return;

        if(e.key === 'Escape'){
          e.preventDefault();
          closeAsNecessary();
          return;
        }

        if(e.key !== 'Tab') return;
        const f = focusables(); if(!f.length) return;
        const first = f[0], last = f[f.length-1];

        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
      document.addEventListener('keydown', trap);
      backdrop.addEventListener('click', closeAsNecessary);

      function read(){ try{ return JSON.parse(localStorage.getItem(LS_KEY)||''); }catch(_){ return null; } }

      const stored = read();
      if (stored && typeof stored === 'object') {
        a.checked = !!stored.analytics;
        m.checked = !!stored.marketing;
        applyConsent({ analytics: !!stored.analytics, marketing: !!stored.marketing });
        show(false);
      } else {
        show(true);
      }

      accept.addEventListener('click', ()=>{ a.checked = true; m.checked = true; applyConsent({analytics:true, marketing:true}); show(false); });
      reject.addEventListener('click', ()=>{ a.checked = false; m.checked = false; applyConsent({analytics:false, marketing:false}); show(false); });
      save.addEventListener('click', ()=>{ applyConsent({analytics:a.checked, marketing:m.checked}); show(false); });

      openBtn?.addEventListener('click', (e)=>{ e.preventDefault(); show(true); });
      closeBtn?.addEventListener('click', closeAsNecessary);
    })();
  </script>

  <!-- ========= Base UX / Perf ========= -->
  <script>
    document.documentElement.classList.remove('no-js');
    document.querySelectorAll('#yearNow').forEach(el => el.textContent = new Date().getFullYear());

    // Mobile menu
    (function(){
      const btn = document.getElementById('menuBtn');
      const nav = document.getElementById('mnav');
      const bd = document.getElementById('mnavBackdrop');
      const close = document.getElementById('mnavClose');

      if(!btn || !nav || !bd || !close) return;

      function show(v){
        const on = !!v;
        nav.classList.toggle('visible', on);
        nav.setAttribute('aria-hidden', on ? 'false' : 'true');
        bd.classList.toggle('visible', on);
        bd.setAttribute('aria-hidden', on ? 'false' : 'true');
        btn.setAttribute('aria-expanded', on ? 'true' : 'false');
        document.body.style.overflow = on ? 'hidden' : '';
        if(on){ try{ close.focus(); }catch(_){ } }
        else { try{ btn.focus(); }catch(_){ } }
      }

      btn.addEventListener('click', ()=> show(true));
      close.addEventListener('click', ()=> show(false));
      bd.addEventListener('click', ()=> show(false));
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && nav.classList.contains('visible')) show(false); });
      nav.querySelectorAll('[data-mnav]').forEach(a=> a.addEventListener('click', ()=> show(false)));
    })();

    // Scroll progress
    (function(){
      const bar = document.getElementById('progress');
      const max = () => document.documentElement.scrollHeight - innerHeight;
      const run = () => {
        const p = Math.max(0, Math.min(1, scrollY / Math.max(1, max())));
        bar.style.width = (p*100)+'%';
      };
      addEventListener('scroll', run, { passive:true });
      addEventListener('resize', run);
      run();
    })();

    // KPI Counter
    (function(){
      const els = [...document.querySelectorAll('[data-count]')];
      if (!('IntersectionObserver' in window)) { els.forEach(e=>e.textContent=e.getAttribute('data-count')); return; }
      const io = new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(!e.isIntersecting) return;
          const el = e.target;
          const target = +el.getAttribute('data-count');
          let n = 0;
          const step = Math.max(1, Math.ceil(target/60));
          const tick = () => {
            n += step;
            if(n>=target) n = target;
            el.textContent = n;
            if(n<target) requestAnimationFrame(tick);
          };
          tick();
          io.unobserve(el);
        });
      },{threshold:.6});
      els.forEach(el=>io.observe(el));
    })();

    // Ambient movement
    (function(){
      const space = document.querySelector('.space');
      if(!space) return;
      if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        space.style.display='none';
        return;
      }
      let raf, t = 0, lastY = window.scrollY;
      const loop = () => {
        const y = window.scrollY;
        const dy = Math.max(-1, Math.min(1, (y - lastY) / 2000));
        lastY = y;
        t += 0.002 + dy * 0.001;
        const x = (Math.sin(t) + 1) / 2;
        const yy = (Math.cos(t*0.8) + 1) / 2;
        document.documentElement.style.setProperty('--ambient-x', x.toFixed(4));
        document.documentElement.style.setProperty('--ambient-y', yy.toFixed(4));
        raf = requestAnimationFrame(loop);
      };
      raf = requestAnimationFrame(loop);
      addEventListener('visibilitychange',()=>{
        if(document.hidden){ cancelAnimationFrame(raf); }
        else { raf = requestAnimationFrame(loop); }
      });
    })();

    // Reveal
    (function(){
      try{
        const pref = window.matchMedia && matchMedia('(prefers-reduced-motion: reduce)').matches;
        const els = Array.from(document.querySelectorAll('.fade-up'));
        if(pref || !('IntersectionObserver' in window)){ els.forEach(el => el.classList.add('visible')); return; }
        const io = new IntersectionObserver(entries => {
          for (const e of entries){
            if(e.isIntersecting){
              e.target.classList.add('visible');
              io.unobserve(e.target);
            }
          }
        }, { threshold:.12, rootMargin:'0px 0px -10% 0px' });
        els.forEach(el => io.observe(el));
      }catch(_){}
    })();

    // Chapters active state
    (function(){
      const links = Array.from(document.querySelectorAll('.chapters a'));
      const ids = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
      if(!('IntersectionObserver' in window)) return;
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => {
          if(e.isIntersecting){
            const id = '#' + (e.target.getAttribute('id')||'');
            links.forEach(a => a.setAttribute('aria-current', a.getAttribute('href')===id ? 'true':'false'));
          }
        });
      }, { threshold: .35 });
      ids.forEach(el => io.observe(el));
    })();

    // Lightbox
    (function(){
      const dlg = document.getElementById('zoom');
      if(!dlg) return;
      const img = dlg.querySelector('.zoom-img');
      const main = document.getElementById('main');

      function lockMain(){ main?.setAttribute('inert',''); main?.setAttribute('aria-hidden','true'); }
      function unlockMain(){ main?.removeAttribute('inert'); main?.removeAttribute('aria-hidden'); }

      document.addEventListener('click', (e) => {
        const t = e.target.closest('[data-zoom]');
        if(!t) return;
        img.src = t.currentSrc || t.src;
        img.alt = t.alt || '';
        dlg.showModal();
        lockMain();
      });

      dlg.addEventListener('click', (e) => { if(e.target===dlg) dlg.close(); });
      dlg.querySelector('.zoom-close').onclick = () => dlg.close();
      dlg.addEventListener('close', unlockMain);
      dlg.addEventListener('cancel', unlockMain);
      document.addEventListener('keydown', (e) => { if(e.key==='Escape' && dlg.open) dlg.close(); });
    })();

    // Sticky CTA plumbing
    (function(){
      const el = document.getElementById('stickyCTA');
      const btn = document.getElementById('stickyBtn');
      if(!el || !btn) return;

      function isMobile(){ return window.matchMedia('(max-width:1023px)').matches; }

      let wanted = false;

      const show = (v) => {
        wanted = !!v;
        const on = wanted && isMobile();
        el.style.transform = on ? 'translateY(0)' : 'translateY(100%)';
        el.style.opacity = on ? '1' : '0';
        el.style.pointerEvents = on ? 'auto' : 'none';
        el.setAttribute('aria-hidden', on ? 'false' : 'true');
        btn.tabIndex = on ? 0 : -1;
      };
      show(false);

      addEventListener('resize', ()=> show(wanted), { passive:true });

      window.__sticky = {
        show,
        set(label, onClick){
          btn.textContent = label;
          btn.setAttribute('aria-label', `N√§chster Schritt: ${label}`);
          btn.onclick = onClick;
        }
      };
    })();

    // Bottom sheet controller (mobile) + swipe-to-close (native feel)
    (function(){
      const bd = document.getElementById('sheetBackdrop');
      const sh = document.getElementById('sheet');
      const card = document.getElementById('sheetCard');
      const close = document.getElementById('sheetClose');
      const title = document.getElementById('sheetTitle');
      const sub = document.getElementById('sheetSub');
      const body = document.getElementById('sheetBody');
      const main = document.getElementById('main');
      const header = document.querySelector('header');
      const footer = document.querySelector('footer');

      if(!bd || !sh || !close || !body || !title || !sub || !card) return;

      function isMobile(){ return window.matchMedia('(max-width:1023px)').matches; }

      function setPageInert(on){
        try{ main?.toggleAttribute('inert', !!on); }catch(_){}
        try{ header?.toggleAttribute('inert', !!on); }catch(_){}
        try{ footer?.toggleAttribute('inert', !!on); }catch(_){}
      }

      function open(payload){
        if(!isMobile()) return;
        title.textContent = payload?.title || 'Ergebnis';
        sub.textContent = payload?.sub || '';
        body.innerHTML = payload?.html || '';
        bd.classList.add('visible');
        sh.classList.add('visible');
        bd.setAttribute('aria-hidden','false');
        sh.setAttribute('aria-hidden','false');
        document.body.style.overflow='hidden';
        setPageInert(true);
        card.style.transform = 'translateY(0px)';
        try{ close.focus({preventScroll:true}); }catch(_){ close.focus(); }
      }
      function hide(){
        bd.classList.remove('visible');
        sh.classList.remove('visible');
        bd.setAttribute('aria-hidden','true');
        sh.setAttribute('aria-hidden','true');
        document.body.style.overflow='';
        setPageInert(false);
        card.style.transform = 'translateY(0px)';
      }

      close.addEventListener('click', hide);
      bd.addEventListener('click', hide);
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && sh.classList.contains('visible')) hide(); });

      // Swipe-to-close (pointer)
      (function(){
        let active = false;
        let startY = 0;
        let lastY = 0;
        let startT = 0;

        function onDown(e){
          if(!sh.classList.contains('visible')) return;
          // allow scroll inside body; only start drag when user grabs header/handle area
          const allow = e.target.closest('.sheet-head, .sheet-handle');
          if(!allow) return;

          active = true;
          startY = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;
          lastY = startY;
          startT = performance.now();
          card.setPointerCapture?.(e.pointerId);
        }

        function onMove(e){
          if(!active) return;
          const y = e.clientY || (e.touches && e.touches[0]?.clientY) || 0;
          lastY = y;
          const dy = Math.max(0, y - startY);
          // resistance
          const eased = dy > 0 ? (dy * 0.92) : 0;
          card.style.transform = `translateY(${eased}px)`;
        }

        function onUp(){
          if(!active) return;
          active = false;

          const dy = Math.max(0, lastY - startY);
          const dt = Math.max(1, performance.now() - startT);
          const v = dy / dt; // px/ms

          const shouldClose = (dy > 110) || (v > 0.9 && dy > 60);
          if(shouldClose){
            // tiny ‚Äúhaptic‚Äù
            try{ navigator.vibrate?.(10); }catch(_){}
            hide();
          }else{
            card.style.transform = 'translateY(0px)';
          }
        }

        card.addEventListener('pointerdown', onDown);
        card.addEventListener('pointermove', onMove);
        card.addEventListener('pointerup', onUp);
        card.addEventListener('pointercancel', onUp);
      })();

      window.__sheet = { open, hide, isMobile };
    })();
  </script>

  <!-- ========= Attribution + Decision State (SSoT) + Tracking ========= -->
  <script>
    (function(){
      function parseQS(qs){
        const p = {};
        (qs||'').replace(/^\?/,'').split('&').forEach(kv=>{
          if(!kv) return;
          const [k,v] = kv.split('=');
          p[decodeURIComponent(k)] = decodeURIComponent(v||'');
        });
        return p;
      }

      const params = parseQS(location.search);
      const UTM_KEYS = ['utm_source','utm_medium','utm_campaign','utm_content','utm_term','gclid','msclkid','fbclid'];
      const hasUTM = UTM_KEYS.some(k => params[k]);

      const LS_KEY_FIRST = 'hh_utm_first';
      const SS_KEY_SESS  = 'hh_utm_session';

      function store(obj, key){ try{ localStorage.setItem(key, JSON.stringify(obj)); }catch(_){ } }
      function load(key){ try{ const v=localStorage.getItem(key); return v? JSON.parse(v):null; }catch(_){ return null; } }
      function sstore(obj, key){ try{ sessionStorage.setItem(key, JSON.stringify(obj)); }catch(_){ } }

      if(hasUTM){
        const minimal = {};
        UTM_KEYS.forEach(k=>{ if(params[k]) minimal[k]=params[k]; });
        if(!load(LS_KEY_FIRST)) store(minimal, LS_KEY_FIRST);
        sstore(minimal, SS_KEY_SESS);
      }

      function getAttribution(){
        let first={}, sess={};
        try{ first = JSON.parse(localStorage.getItem(LS_KEY_FIRST)||'{}'); }catch(_){}
        try{ sess  = JSON.parse(sessionStorage.getItem(SS_KEY_SESS)||'{}'); }catch(_){}
        return Object.assign({}, first, sess);
      }

      function appendUTM(url){
        try{
          const at = getAttribution();
          const u = new URL(url, location.origin);
          Object.keys(at).forEach(k=>{ if(at[k]) u.searchParams.set(k, at[k]); });
          return u.toString();
        }catch(_){
          return url;
        }
      }

      function enhanceLinks(){
        document.querySelectorAll('a[href*="wa.me/"], a[href*="outlook.office.com/book/"]').forEach(a=>{
          a.href = appendUTM(a.href);
        });
      }
      if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', enhanceLinks);
      else enhanceLinks();

      function sendEvent(name, payload={}){ try{ gtag('event', name, payload); }catch(_){ } }

      window.__getAttribution = getAttribution;
      window.__appendUTM = appendUTM;
      window.__sendEvent = sendEvent;

      // Decision state SSoT
      const DECISION_LS = 'hh_decision_state_v2';
      const defaults = {
        ampel_status: '',
        ampel_score: '',
        decision_context: 'privat',
        intent_level: '',
        trust_entry: 'ampel_check',
        decision_stage: 'einordnung',
        last_ampel_at: '',
        returned_visitor_30d: 'false',
        ampel_version: (typeof AMPEL_VERSION !== 'undefined' ? AMPEL_VERSION : 'v1'),
        page_variant: (typeof PAGE_VARIANT !== 'undefined' ? PAGE_VARIANT : 'decision-space')
      };

      function readDecision(){
        try{
          const v = JSON.parse(localStorage.getItem(DECISION_LS) || '{}');
          return Object.assign({}, defaults, v || {});
        }catch(_){
          return Object.assign({}, defaults);
        }
      }
      function writeDecision(state){
        try{ localStorage.setItem(DECISION_LS, JSON.stringify(state)); }catch(_){}
      }

      window.__decision = {
        state: readDecision(),
        set(patch){
          const s = Object.assign({}, window.__decision.state, patch || {});
          window.__decision.state = s;
          writeDecision(s);
          return s;
        }
      };

      // Tracking policy
      window.__track = (function(){
        const once = new Set();

        function canKlaviyo(){
          try{
            return !!(window.__cmpState?.marketing && window.klaviyo && Array.isArray(window.klaviyo));
          }catch(_){ return false; }
        }

        function base(props){
          return Object.assign({}, getAttribution(), {
            page_path: location.pathname,
            page_hash: location.hash || '',
            page_title: document.title,
            ampel_version: window.__decision?.state?.ampel_version || defaults.ampel_version,
            page_variant: window.__decision?.state?.page_variant || defaults.page_variant
          }, props || {});
        }

        function ga(name, props){ sendEvent(name, base(props)); }
        function kv(name, props){
          if(!canKlaviyo()) return;
          try{ window.klaviyo.push(['track', name, base(props)]); }catch(_){}
        }

        function onceGA(key, name, props){
          if(once.has(key)) return;
          once.add(key);
          ga(name, props);
        }

        function onceKV(key, name, props){
          if(once.has(key)) return;
          once.add(key);
          kv(name, props);
        }

        return { ga, kv, onceGA, onceKV, canKlaviyo };
      })();

      // CTA click tracking
      (function(){
        const ctas = new Set([ ...document.querySelectorAll('[data-start]'), document.getElementById('ctaFinal') ].filter(Boolean));
        ctas.forEach(el=>{
          el.addEventListener('click', ()=>{
            window.__track.ga('CTA_Click', {
              cta_id: el.id || el.getAttribute('data-ctx') || 'cta',
              cta_text: (el.textContent||'').trim()
            });
          }, { passive:true });
        });
      })();
    })();
  </script>

  <!-- Returned Visitor 30d -->
  <script>
    (function(){
      const FIRST = 'hh_first_visit';
      const LAST  = 'hh_last_visit';
      const FIRED = 'hh_returned_30d_fired';
      const now = Date.now();

      try{
        const first = Number(localStorage.getItem(FIRST) || 0);
        const last  = Number(localStorage.getItem(LAST)  || 0);

        if(!first) localStorage.setItem(FIRST, String(now));

        const isReturn = !!first && (now - last) > (6 * 60 * 60 * 1000); // >6h
        const within30d = !!first && (now - first) <= (30 * 24 * 60 * 60 * 1000);

        if(isReturn && within30d && !localStorage.getItem(FIRED)){
          window.__decision?.set({ returned_visitor_30d: 'true' });
          window.__track?.onceGA('returned_30d', 'Returned_Visitor_30d', {
            days_since_first: Math.round((now - first) / (24*60*60*1000))
          });
          localStorage.setItem(FIRED, '1');
        }

        localStorage.setItem(LAST, String(now));
      }catch(_){}
    })();
  </script>

  <!-- Optional smooth scroll (self-hosted) -->
  <script>
    (function(){
      const prefReduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(prefReduce) return;

      let loaded = false;
      const LENIS_URL = '/assets/lenis-1.0.42.min.js';

      function loadLenis(){
        if(loaded) return;
        loaded = true;

        const s = document.createElement('script');
        s.src = LENIS_URL;
        s.defer = true;

        s.onload = () => {
          if(!window.Lenis) return;
          const lenis = new Lenis({
            duration: 1.05,
            easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
            smoothWheel: true,
            smoothTouch: false
          });
          window.__lenis = lenis;

          const raf = (time)=>{ lenis.raf(time); requestAnimationFrame(raf); };
          requestAnimationFrame(raf);
        };
        document.head.appendChild(s);
      }

      const triggers = ['pointerdown','keydown','wheel','touchstart'];
      const onFirst = () => { loadLenis(); triggers.forEach(t=>removeEventListener(t,onFirst,true)); };
      triggers.forEach(t=>addEventListener(t,onFirst,true));
      document.querySelectorAll('[data-start]').forEach(b=> b.addEventListener('click', loadLenis, { once:true }));
    })();
  </script>

  <!-- ========= Klaviyo Identify after DOI (Option A, minimal & safe) ========= -->
  <script>
    (function(){
      const DOI_FLAG_KEY = 'hh_doi_pending_identify';
      const DOI_EMAIL_KEY = 'hh_doi_email_v1';
      const DOI_EMAIL_TTL_MS = 21 * 24 * 60 * 60 * 1000; // 21 days

      function readEmail(){
        try{
          const raw = localStorage.getItem(DOI_EMAIL_KEY);
          if(!raw) return '';
          const obj = JSON.parse(raw);
          if(!obj || !obj.email || !obj.ts) return '';
          if(Date.now() - Number(obj.ts) > DOI_EMAIL_TTL_MS) return '';
          return String(obj.email || '').trim();
        }catch(_){ return ''; }
      }

      function clearPending(){
        try{ localStorage.removeItem(DOI_FLAG_KEY); }catch(_){}
      }

      function waitForKlaviyo(timeoutMs=6500){
        return new Promise((resolve, reject)=>{
          const start = Date.now();
          (function tick(){
            if(window.klaviyo && Array.isArray(window.klaviyo)) return resolve(true);
            if(Date.now() - start > timeoutMs) return reject(new Error('klaviyo_not_ready'));
            setTimeout(tick, 60);
          })();
        });
      }

      async function runIdentifyAfterDOI(){
        const qs = new URLSearchParams(location.search);
        const isDoiReturn = (qs.get('doi') === '1') || (localStorage.getItem(DOI_FLAG_KEY) === '1');
        if(!isDoiReturn) return;
        if(!window.__decision?.state) return;

        // Consent: DOI + Checkbox => marketing may be enabled defensively here
        if(!window.__cmpState?.marketing && window.__applyConsent){
          window.__applyConsent({ analytics: !!window.__cmpState.analytics, marketing: true });
        }

        try{ await waitForKlaviyo(6500); }catch(_){
          clearPending();
          return;
        }

        const email = readEmail();
        if(!email){
          clearPending();
          return;
        }

        const s = window.__decision.state;

        try{
          window.klaviyo.push([
            'identify',
            { email },
            {
              ampel_status: s.ampel_status,
              ampel_score: s.ampel_score,
              decision_context: s.decision_context,
              intent_level: s.intent_level,
              decision_stage: s.decision_stage,
              trust_entry: s.trust_entry,
              last_ampel_at: s.last_ampel_at,
              returned_visitor_30d: s.returned_visitor_30d,
              ampel_version: s.ampel_version,
              page_variant: s.page_variant
            }
          ]);
          window.__track?.ga('Klaviyo_Identify_After_DOI', { ampel_status: s.ampel_status, decision_context: s.decision_context });
          // optional: also send a KV event for debugging / flow trigger
          window.__track?.kv('Klaviyo_Identify_After_DOI', { ampel_status: s.ampel_status, decision_context: s.decision_context });
        }catch(_){}

        clearPending();
      }

      if(document.readyState === 'loading'){
        document.addEventListener('DOMContentLoaded', runIdentifyAfterDOI);
      }else{
        runIdentifyAfterDOI();
      }
    })();
  </script>

  <!-- ========= Ampel-Check + Archive Form + Mobile Sheet ========= -->
  <script>
    (function(){
      const startBtns = document.querySelectorAll('[data-start]');
      const wrap = document.getElementById('check-steps');
      const resultBox = document.getElementById('check-result');
      const startBox = document.getElementById('check-start');

      const stepLabel = document.getElementById('stepLabel');
      const progress = document.getElementById('progressBar');
      const stepHint = document.getElementById('stepHint');

      const cancelBtn = document.getElementById('checkCancel');
      const backBtn = document.getElementById('checkBack');
      const nextBtn = document.getElementById('checkNext');
      const autoAdvance = document.getElementById('autoAdvance');

      if(!wrap || !startBox || !resultBox || !nextBtn || !autoAdvance) return;

      const steps = Array.from(document.querySelectorAll('#check-steps .step'));
      const max = steps.length;

      const answers = { q1: 0, q2: 0, q3: 0 };
      let step = 1;
      let score = 0;
      let finished = false;

      let decisionContext = (window.__decision?.state?.decision_context) || 'privat';

      // DOI email storage (for identify after DOI)
      const DOI_EMAIL_KEY = 'hh_doi_email_v1';
      const DOI_FLAG_KEY  = 'hh_doi_pending_identify';

      function smartScrollTo(elOrId, block='start'){
        const el = typeof elOrId === 'string' ? document.querySelector(elOrId) : elOrId;
        if(!el) return;

        if(window.__lenis && typeof window.__lenis.scrollTo === 'function'){
          window.__lenis.scrollTo(el, { offset: -8, immediate: false });
        }else{
          el.scrollIntoView({ behavior: 'smooth', block });
        }
      }

      function setDecisionContext(v){
        decisionContext = v || 'privat';
        try{ sessionStorage.setItem('hh_decision_context', decisionContext); }catch(_){}
        window.__decision?.set({ decision_context: decisionContext });
        window.__track?.ga('Decision_Context_Selected', { decision_context: decisionContext });
      }

      function resetState(){
        score = 0; step = 1;
        Object.keys(answers).forEach(k => answers[k] = 0);
        Array.from(wrap.querySelectorAll('input[type="radio"]')).forEach(i => i.checked=false);
        wrap.querySelectorAll('label.btn.small').forEach(l => l.classList.remove('is-selected'));
      }

      function updateNextState(){
        const fs = steps[step-1];
        const hasChoice = !!fs?.querySelector('input[type="radio"]:checked');
        nextBtn.disabled = !hasChoice;
        nextBtn.textContent = (step >= max) ? 'Ergebnis anzeigen' : 'Weiter';
      }

      function updateHead(){
        stepLabel.textContent = `Schritt ${Math.min(step,max)} von ${max}`;
        progress.value = Math.max(0, step-1);
        stepHint.textContent = step===1 ? 'Kurzer Eindruck reicht.' : (step===2 ? 'Fast geschafft.' : 'Letzter Klick.');
        if(backBtn) backBtn.disabled = step <= 1;
        updateNextState();
      }

      function showStep(n){
        steps.forEach(s => s.style.display='none');
        const t = steps[n-1];
        if(t){
          t.style.display='block';
          const first = t.querySelector('input');
          if(first){ try{ first.focus({ preventScroll:true }); }catch(_){ first.focus(); } }
        }
        updateHead();
      }

      function waLink(text){
        const raw = 'https://wa.me/4917660408380?text=' + encodeURIComponent(text);
        return window.__appendUTM ? window.__appendUTM(raw) : raw;
      }

      function bookLink(){
        const raw = 'https://outlook.office.com/book/HeikoHaerter@dvag02.onmicrosoft.com/?ismsaljsauthenabled';
        return window.__appendUTM ? window.__appendUTM(raw) : raw;
      }

      function openPrintSheet(status, score){
        const now = new Date();
        const safeDate = now.toISOString().slice(0,10);
        const date = now.toLocaleDateString('de-DE', { year:'numeric', month:'2-digit', day:'2-digit' });

        window.__track?.ga('Downloaded_Ampel_Sheet', {
          ampel_status: status,
          ampel_score: score,
          decision_context: decisionContext
        });

        const map = {
          rot:  { title:'ROT ‚Äì kurzfristig sortieren',  next:'10 Minuten Einordnung: Was ist zuerst dran?' },
          gelb: { title:'GELB ‚Äì Reihenfolge kl√§ren',    next:'In Ruhe priorisieren ‚Äì ohne Entscheidung.' },
          gruen:{ title:'GR√úN ‚Äì wirkt solide',          next:'Ergebnis sichern ‚Äì als Erinnerung.' }
        };
        const meta = map[status] || map.gruen;

        const html = `<!doctype html>
<html lang="de"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ampel-Ergebnis</title>
<style>
  @page { margin: 14mm; }
  body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.45;margin:0;color:#111}
  .wrap{padding:18px}
  h1{font-size:22px;margin:0 0 8px}
  .muted{color:#444}
  .box{border:1px solid #ddd;border-radius:12px;padding:14px 16px;margin:14px 0}
  .tiny{font-size:12px;color:#555;margin-top:16px}
  .no-print{display:block}
  @media print{ .no-print{display:none!important} }
</style></head>
<body>
  <div class="wrap">
    <h1>Ampel-Ergebnis</h1>
    <div class="muted">Datum: ${date}</div>
    <div class="box">
      <strong>Status:</strong> ${meta.title}<br>
      <strong>Einordnung:</strong> ${meta.next}<br>
      <strong>Score (intern):</strong> ${score}<br>
      <strong>Kontext:</strong> ${decisionContext}<br>
      <strong>Ampel-Version:</strong> ${AMPEL_VERSION}<br>
      <strong>Seiten-Variante:</strong> ${PAGE_VARIANT}
    </div>
    <div class="tiny">
      Hinweis: Dieses Merkblatt ist eine grobe Einordnung und ersetzt keine Rechts- oder Steuerberatung.
      Entscheidungen bitte erst nach vollst√§ndiger Datengrundlage treffen.
    </div>
    <p class="tiny no-print"><a href="#" onclick="window.print();return false;">Drucken / als PDF speichern</a></p>
  </div>
</body></html>`;

        const w = window.open('', '_blank', 'noopener,noreferrer,width=720,height=840');
        if(!w){
          try{
            const blob = new Blob([html], { type:'text/html;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ampel-ergebnis-${status}-${safeDate}.html`;
            document.body.appendChild(a);
            a.click();
            a.remove();
            setTimeout(()=>URL.revokeObjectURL(url), 8000);
          }catch(_){}
          return;
        }

        try{ w.opener = null; }catch(_){}

        w.document.open();
        w.document.write(html);
        w.document.close();

        let did = false;
        const fire = () => {
          if(did) return;
          did = true;
          try{ w.focus(); w.print(); }catch(_){}
        };

        try{ w.addEventListener('load', fire, { once:true }); }catch(_){}
        setTimeout(fire, 250);
      }

      // ‚úÖ Single source of truth: renderArchiveForm (redirect includes doi=1)
      function renderArchiveForm(status, score){
        const returned30d = String(window.__decision?.state?.returned_visitor_30d || 'false');
        const lastAmpel = (window.__decision?.state?.last_ampel_at) || new Date().toISOString();
        const intent = (status === 'rot') ? 'hoch' : (status === 'gelb') ? 'mittel' : 'niedrig';

        const copy = {
          rot:   { title:'Entscheidungsarchiv (optional)', line:'2 E-Mails. Kein Newsletter. Kein Druck. Nur Ordnung + Entlastung.', consent:'Ich m√∂chte mein Ergebnis + 1 Follow-up (max. 2 Mails) erhalten.' },
          gelb:  { title:'Entscheidungsarchiv (optional)', line:'3 E-Mails √ºber 21 Tage. Kein Termin-Link bis Mail 3. Reihenfolge halten.', consent:'Ich m√∂chte mein Ergebnis + 2 Follow-ups (max. 3 Mails) erhalten.' },
          gruen: { title:'Entscheidungsarchiv (optional)', line:'1 Mail mit Ergebnis + 1 Erinnerung in 12 Monaten. Kein Push.', consent:'Ich m√∂chte mein Ergebnis erhalten (und eine Erinnerung in 12 Monaten).' }
        };
        const c = copy[status] || copy.gruen;

        const LIST_ID = 'UmkUBm'; // ‚úÖ real list-id
        const redirectUrl = 'https://heikohaerter.com/?doi=1#ampel-check'; // ‚úÖ DOI return marker

        return `
          <div class="panel" style="margin-top:1rem">
            <h3 style="margin-bottom:.25rem">${c.title}</h3>
            <p class="micro" style="margin:0 0 .6rem">${c.line}</p>

            <form
              action="https://manage.kmail-lists.com/subscriptions/subscribe"
              method="POST"
              target="_self"
              style="display:grid;gap:.6rem;max-width:560px;margin:0 auto"
              data-archive-form
            >
              <input type="hidden" name="a" value="${KLAVIYO_COMPANY_ID}">
              <input type="hidden" name="g" value="${LIST_ID}">
              <input type="hidden" name="redirect" value="${redirectUrl}">

              <!-- Mirror properties (harmless) -->
              <input type="hidden" name="ampel_status" value="${status}">
              <input type="hidden" name="ampel_score" value="${score}">
              <input type="hidden" name="decision_context" value="${decisionContext}">
              <input type="hidden" name="intent_level" value="${intent}">
              <input type="hidden" name="trust_entry" value="ampel_check">
              <input type="hidden" name="decision_stage" value="einordnung">
              <input type="hidden" name="last_ampel_at" value="${lastAmpel}">
              <input type="hidden" name="returned_visitor_30d" value="${returned30d}">
              <input type="hidden" name="ampel_version" value="${AMPEL_VERSION}">
              <input type="hidden" name="page_variant" value="${PAGE_VARIANT}">

              <!-- honeypot -->
              <input type="text" name="company" tabindex="-1" autocomplete="off" class="visually-hidden" aria-hidden="true">

              <label class="visually-hidden" for="archiveEmail">E-Mail</label>
              <input
                id="archiveEmail"
                name="email"
                type="email"
                required
                minlength="6"
                autocomplete="email"
                inputmode="email"
                placeholder="E-Mail f√ºr dein Archiv"
                style="min-height:54px;border-radius:14px;padding:.88rem 1rem"
              >

              <label class="micro" style="display:flex;gap:.55rem;align-items:flex-start;text-align:left">
                <input type="checkbox" name="$consent" value="email" required style="margin-top:.25rem">
                <span>
                  ${c.consent}
                  Hinweise in der <a href="/datenschutz" target="_blank" rel="noopener noreferrer" style="text-decoration:underline">Datenschutzerkl√§rung</a>.
                </span>
              </label>

              <button class="btn btn-primary" type="submit">Ergebnis ins Archiv senden</button>
              <div class="micro" style="opacity:.85;text-align:center">
                Double-Opt-In: Du best√§tigst die E-Mail anschlie√üend einmal.
              </div>
            </form>
          </div>`;
      }

      function renderPanel(color, status, score){
        const k = color==='red'?'red':(color==='yellow'?'yellow':'green');
        const copy = {
          red: {
            title: 'üî¥ Rot: 10 Minuten sortieren ‚Äì ohne Termin.',
            text:  'Mindestens ein Bereich ist akut. Wir ordnen kurz, was jetzt wirklich zuerst kommt. Keine Entscheidung im Gespr√§ch.',
            primary: { kind:'wa', label:'10 Minuten sortieren (WhatsApp)', href: waLink('Hi Heiko, 10 Minuten sortieren. Mein Status: ROT. Kein Termin ‚Äì nur Einordnung.') },
            secondary:{ kind:'book', label:'Kurz-Check buchen', href: bookLink() }
          },
          yellow: {
            title: 'üü° Gelb: Reihenfolge kl√§ren ‚Äì ohne Entscheidung.',
            text:  'Ein paar Themen stehen an. Wir priorisieren ruhig, was wann dran ist ‚Äì ohne Produktdruck.',
            primary: { kind:'book', label:'Reihenfolge kl√§ren (30‚Äì45 Min)', href: bookLink() },
            secondary:{ kind:'link', label:'Transparenz ansehen', href:'#transparenz' }
          },
          green: {
            title: 'üü¢ Gr√ºn: Ergebnis sichern.',
            text:  'Wirkt aktuell solide. Wenn du magst: Ergebnis als Merkblatt sichern ‚Äì damit es nicht wieder im Kopf h√§ngt.',
            primary: { kind:'save', label:'Ergebnis sichern (PDF)' },
            secondary:{ kind:'link', label:'Transparenz ansehen', href:'#transparenz' }
          }
        };
        const c = copy[k];

        return `
          <div class="result-panel is-${k}">
            <div class="result-grid">
              <div class="result-main">
                <div class="result-title">${c.title}</div>
                <p>${c.text}</p>

                <div class="micro" style="text-align:center;opacity:.92;margin-top:.25rem">Worum geht‚Äôs bei dir eher?</div>
                <div class="chips" data-decision-chips>
                  <button type="button" class="chip" data-dc="privat" aria-pressed="${decisionContext==='privat'}">Privat</button>
                  <button type="button" class="chip" data-dc="unternehmerisch" aria-pressed="${decisionContext==='unternehmerisch'}">Unternehmerisch</button>
                  <button type="button" class="chip" data-dc="beides" aria-pressed="${decisionContext==='beides'}">Beides</button>
                </div>

                ${renderArchiveForm(status, score)}
              </div>

              <aside class="result-actions" aria-label="N√§chster Schritt">
                <div class="micro" style="opacity:.9;margin:2px 0 10px;text-align:center">N√§chster Schritt (wenn du willst)</div>

                ${
                  c.primary.kind === 'save'
                    ? `<button type="button" class="btn btn-primary" data-save-result>${c.primary.label}</button>`
                    : `<a href="${c.primary.href}" ${c.primary.kind==='wa'?'target="_blank" rel="noopener noreferrer"':''} class="btn btn-primary">${c.primary.label}</a>`
                }

                ${
                  c.secondary
                    ? (c.secondary.kind==='book'
                        ? `<a href="${c.secondary.href}" class="btn btn-ghost" rel="nofollow noopener noreferrer">${c.secondary.label}</a>`
                        : `<a href="${c.secondary.href}" class="btn btn-ghost">${c.secondary.label}</a>`
                      )
                    : ''
                }

                <div class="micro" style="margin-top:10px;text-align:center;opacity:.85">
                  Kein Push. Du entscheidest Tempo & Tiefe.
                </div>
              </aside>
            </div>
          </div>`;
      }

      function renderSheetHTML(status, score){
        const map = {
          rot:  { title:'ROT',  sub:'Kurz sortieren ‚Äì ohne Termin', hint:'Mindestens ein Bereich ist akut. Erst Reihenfolge ‚Äì dann Entscheidung.' },
          gelb: { title:'GELB', sub:'Reihenfolge kl√§ren', hint:'Ein paar Themen stehen an. Ruhig priorisieren ‚Äì ohne Druck.' },
          gruen:{ title:'GR√úN', sub:'Wirkt solide', hint:'Ergebnis sichern ‚Äì damit‚Äôs nicht wieder im Kopf h√§ngt.' }
        };
        const meta = map[status] || map.gruen;

        const actions = {
          rot:  { primaryLabel:'10 Minuten sortieren (WhatsApp)', primaryHref: waLink('Hi Heiko, 10 Minuten sortieren. Mein Status: ROT. Kein Termin ‚Äì nur Einordnung.'), secondaryLabel:'Kurz-Check buchen', secondaryHref: bookLink(), primaryType:'link' },
          gelb: { primaryLabel:'Reihenfolge kl√§ren (30‚Äì45 Min)', primaryHref: bookLink(), secondaryLabel:'Transparenz', secondaryHref:'#transparenz', primaryType:'link' },
          gruen:{ primaryLabel:'Ergebnis sichern (PDF)', primaryHref:'#', secondaryLabel:'Transparenz', secondaryHref:'#transparenz', primaryType:'button' }
        }[status] || actions.gruen;

        const html = `
          <div class="micro" style="text-align:center;opacity:.9">${meta.hint}</div>

          <div class="chips" style="margin-top:.75rem" data-decision-chips>
            <button type="button" class="chip" data-dc="privat" aria-pressed="${decisionContext==='privat'}">Privat</button>
            <button type="button" class="chip" data-dc="unternehmerisch" aria-pressed="${decisionContext==='unternehmerisch'}">Unternehmerisch</button>
            <button type="button" class="chip" data-dc="beides" aria-pressed="${decisionContext==='beides'}">Beides</button>
          </div>

          <div class="sheet-actions">
            ${
              actions.primaryType === 'button'
                ? `<button type="button" class="btn btn-primary" data-save-result>${actions.primaryLabel}</button>`
                : `<a class="btn btn-primary" href="${actions.primaryHref}" ${status==='rot'?'target="_blank" rel="noopener noreferrer"':''}>${actions.primaryLabel}</a>`
            }
            <a class="btn btn-ghost" href="${actions.secondaryHref}" ${actions.secondaryHref.startsWith('http')?'rel="nofollow noopener noreferrer"':''}>${actions.secondaryLabel}</a>
          </div>

          <div class="sheet-inline">
            ${renderArchiveForm(status, score)}
          </div>

          <div class="sheet-note">Score intern: ${score} ¬∑ Kontext: ${decisionContext}</div>
        `;
        return { meta, html };
      }

      function trackAmpelResult(status, score){
        const intent = status === 'rot' ? 'hoch' : (status === 'gelb' ? 'mittel' : 'niedrig');
        const nowIso = new Date().toISOString();

        window.__decision?.set({
          ampel_status: status,
          ampel_score: String(score),
          decision_context: decisionContext,
          intent_level: intent,
          trust_entry: 'ampel_check',
          decision_stage: 'einordnung',
          last_ampel_at: nowIso,
          ampel_version: AMPEL_VERSION,
          page_variant: PAGE_VARIANT
        });

        window.__track?.ga('Ampel_Ergebnis', {
          ampel_status: status,
          ampel_score: score,
          decision_context: decisionContext,
          intent_level: intent,
          trust_entry: 'ampel_check',
          decision_stage: 'einordnung',
          last_ampel_at: nowIso,
          returned_visitor_30d: window.__decision?.state?.returned_visitor_30d || 'false'
        });
      }

      function wireResultInteractions(root, status, score){
        // decision chips
        const chips = root.querySelector('[data-decision-chips]');
        if(chips){
          chips.addEventListener('click', (e)=>{
            const b = e.target.closest('button[data-dc]');
            if(!b) return;
            const v = b.getAttribute('data-dc') || 'privat';
            chips.querySelectorAll('button[data-dc]').forEach(x=>{
              x.setAttribute('aria-pressed', x===b ? 'true' : 'false');
            });
            setDecisionContext(v);
          });
        }

        // save button
        const saveBtn = root.querySelector('[data-save-result]');
        if(saveBtn){
          saveBtn.addEventListener('click', ()=> openPrintSheet(status, score));
        }

        // archive submit hooks (store email + set DOI pending + enable marketing consent)
        const archiveForm = root.querySelector('[data-archive-form]');
        if(archiveForm){
          archiveForm.addEventListener('submit', (e)=>{
            const hp = archiveForm.querySelector('input[name="company"]');
            if (hp && hp.value) { e.preventDefault(); return; }

            const email = String(archiveForm.querySelector('input[name="email"]')?.value || '').trim();
            if(email){
              try{
                localStorage.setItem(DOI_EMAIL_KEY, JSON.stringify({ email, ts: Date.now() }));
                localStorage.setItem(DOI_FLAG_KEY, '1');
              }catch(_){}
            }

            // user explicitly consents in the form -> enable marketing consent (needed for identify)
            if(window.__applyConsent && !window.__cmpState?.marketing){
              window.__applyConsent({ analytics: !!window.__cmpState.analytics, marketing: true });
            }

            window.__track?.ga('Archive_Submit', { ampel_status: status, ampel_score: score, decision_context: decisionContext });
            window.__decision?.set({ decision_stage: 'archiv' });
          });
        }
      }

      function finish(){
        if(finished) return;
        finished = true;

        wrap.style.display = 'none';
        resultBox.style.display = 'block';

        // Thresholds: ROT 1‚Äì3, GELB 4‚Äì6, GR√úN 7‚Äì9
        let status = 'gruen';
        let color = 'green';
        if(score <= 3){ status = 'rot'; color = 'red'; }
        else if(score <= 6){ status = 'gelb'; color = 'yellow'; }

        // Desktop inline result
        resultBox.innerHTML = renderPanel(color, status, score);
        wireResultInteractions(resultBox, status, score);

        // Mobile: open bottom sheet result
        if(window.__sheet?.isMobile?.()){
          const out = renderSheetHTML(status, score);
          window.__sheet.open({
            title: `${out.meta.title} ¬∑ Ergebnis`,
            sub: out.meta.sub,
            html: out.html
          });

          // After sheet content injected, wire events inside sheet
          const sheetBody = document.getElementById('sheetBody');
          if(sheetBody) wireResultInteractions(sheetBody, status, score);
        }

        trackAmpelResult(status, score);
        smartScrollTo('#ampel-check');

        // Sticky CTA
        if(window.__sticky){
          if(status === 'rot'){
            window.__sticky.set('10 Minuten sortieren', ()=> window.open(waLink('Hi Heiko, 10 Minuten sortieren. Mein Status: ROT. Kein Termin ‚Äì nur Einordnung.'), '_blank', 'noopener'));
            window.__sticky.show(true);
          } else if(status === 'gelb'){
            const book = bookLink();
            window.__sticky.set('Reihenfolge kl√§ren', ()=> { location.href = book; });
            window.__sticky.show(true);
          } else {
            window.__sticky.set('Ergebnis sichern (PDF)', ()=> openPrintSheet(status, score));
            window.__sticky.show(true);
          }
        }
      }

      function start(){
        finished = false;
        window.__sticky?.show(false);
        window.__sheet?.hide?.();

        smartScrollTo('#ampel-check');
        startBox.style.display = 'none';
        wrap.style.display = 'block';
        resultBox.style.display = 'none';
        resetState();
        showStep(step);
      }

      function cancel(){
        finished = false;
        window.__sticky?.show(false);
        window.__sheet?.hide?.();

        wrap.style.display = 'none';
        resultBox.style.display = 'none';
        startBox.style.display = 'block';
        smartScrollTo(startBox, 'start');
      }

      function back(){
        if(step <= 1) return;
        step -= 1;
        showStep(step);
      }

      function next(){
        if(step < max){
          step += 1;
          showStep(step);
        }else{
          finish();
        }
      }

      // Arrow nav + selection fallback
      const bound = new WeakSet();
      function enableArrowNav(fs){
        if(bound.has(fs)) return;
        bound.add(fs);

        fs.addEventListener('keydown', (e) => {
          if(!['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) return;
          const inputs = Array.from(fs.querySelectorAll('input[type="radio"]'));
          if(!inputs.length) return;

          e.preventDefault();

          let idx = inputs.findIndex(x=>x.checked);
          if(idx < 0) idx = 0;

          let nxt = idx + ((e.key==='ArrowRight'||e.key==='ArrowDown') ? 1 : -1);
          if(nxt < 0) nxt = inputs.length - 1;
          if(nxt >= inputs.length) nxt = 0;

          inputs[nxt].checked = true;
          inputs[nxt].dispatchEvent(new Event('change',{bubbles:true}));
        });
      }
      steps.forEach(enableArrowNav);

      function updateSelectedStyles(fs){
        fs.querySelectorAll('label.btn.small').forEach(l=>{
          const inp = l.querySelector('input[type="radio"]');
          l.classList.toggle('is-selected', !!inp?.checked);
        });
      }

      function onAnswerChange(e){
        const input = e.target;
        if(!input || input.type !== 'radio') return;

        const name = input.name;
        const val = Number(input.value || 0);
        if(!val) return;

        const prev = Number(answers[name] || 0);
        score += (val - prev);
        answers[name] = val;
      }

      startBtns.forEach(b => b.addEventListener('click', start));
      cancelBtn?.addEventListener('click', cancel);
      backBtn?.addEventListener('click', back);
      nextBtn?.addEventListener('click', next);

      steps.forEach((fs, idx) => {
        fs.addEventListener('change', (e) => {
          onAnswerChange(e);
          updateSelectedStyles(fs);
          updateNextState();

          if(autoAdvance.checked){
            if(idx+1 >= max) finish();
            else { step = idx+2; showStep(step); }
          }else{
            try{ nextBtn.focus({ preventScroll:true }); }catch(_){ nextBtn.focus(); }
          }
        });
      });

      autoAdvance.addEventListener('change', updateNextState);
      updateHead();
    })();
  </script>
</body>
</html>
