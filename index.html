<!-- ========================== /index.html — Cinematic Inline v2 ========================== -->
<!doctype html>
<html lang="de" class="no-js" translate="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#05070E" />
  <meta name="robots" content="index,follow" />
  <title>Ruhiger 2-Minuten-Blick · Rot · Gelb · Grün</title>
  <meta name="description" content="2 Minuten · 3 Fragen · Rot/Gelb/Grün – ruhig, anonym, ohne Verkauf. Plan: Jetzt · Als Nächstes · Später." />
  <link rel="icon" href="/favicon.ico" />
  <style>
    /* --------- Tokens */
    :root{
      --bg:#05070E; --bg2:#060913; --surface:#0D1018; --glass:rgba(255,255,255,.06);
      --text:#F1F3FA; --muted:#A8B1C5; --line:rgba(255,255,255,.14);
      --red:#ff4d4d; --amber:#ffcc33; --green:#2ecc71; --accent:#9AA6FF;
      --g1:8px; --g2:12px; --g3:16px; --g4:24px; --g5:32px; --g6:48px; --g7:64px; --g8:88px;
      --t:260ms; --bez:cubic-bezier(.2,.8,.2,1);
    }

    /* --------- Base */
    *{box-sizing:border-box}
    html,body{height:auto}
    body{
      margin:0; color:var(--text);
      font:16px/1.55 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(200,164,75,.10), transparent 55%),
        radial-gradient(900px 600px at 92% -8%, rgba(130,150,255,.10), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    h1,h2,h3{line-height:1.15;margin:0 0 var(--g3);letter-spacing:.1px}
    h1{font-size:clamp(34px,5.4vw,60px);font-weight:800}
    h2{font-size:clamp(22px,3.2vw,32px);font-weight:750}
    h3{font-size:clamp(18px,2.4vw,24px);font-weight:650}
    p{margin:0 0 var(--g3)} a{color:inherit;text-decoration:none}
    .lead{font-size:1.15rem;opacity:.95}
    .micro{font-size:.92rem;color:var(--muted)}
    .muted{color:var(--muted)}
    .hidden{display:none}
    .section{padding:var(--g7) var(--g5)}
    .section-alt{background:linear-gradient(180deg,transparent,rgba(255,255,255,.02) 4%, transparent 96%)}
    .grid{display:grid;gap:var(--g5)}
    .cards{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:var(--g4)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:var(--g5);backdrop-filter:blur(8px)}

    /* --------- A11y */
    .skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:12px;top:12px;width:auto;height:auto;padding:8px 12px;background:#1C2233;color:#fff;border-radius:10px;z-index:999;outline:2px solid #8da0ff}
    :focus-visible{outline:2px solid #9fb3ff; outline-offset:3px; border-radius:10px}

    /* --------- Header (gated) */
    .site-header{
      position:sticky; top:0; z-index:40;
      display:flex; align-items:center; justify-content:space-between; gap:var(--g3);
      padding:14px var(--g5); border-bottom:1px solid rgba(255,255,255,.06);
      background:rgba(7,10,18,.82); backdrop-filter:blur(12px);
      transform:translateY(-18px); opacity:0; pointer-events:none;
      transition:opacity var(--t) var(--bez), transform var(--t) var(--bez);
    }
    .site-header.revealed{transform:none; opacity:1; pointer-events:auto}
    .brand{font-weight:800;letter-spacing:.3px}
    .nav{display:flex;gap:var(--g3)} .nav-link{opacity:.9} .nav-link:hover{opacity:1}

    /* --------- Hero (cinema + aurora + letterbox) */
    .hero{position:relative; min-height:92svh; display:grid; place-items:stretch; overflow:clip; isolation:isolate}
    .hero::before,.hero::after{ /* letterbox bars */
      content:""; position:absolute; left:0; right:0; height:10svh; background:linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,0));
      pointer-events:none; z-index:3
    }
    .hero::before{top:0} .hero::after{bottom:0; transform:scaleY(-1)}
    .hero-art{
      position:absolute; inset:0; z-index:0;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(120,150,255,.18), transparent 60%),
        radial-gradient(1200px 600px at 80% 0%, rgba(240,160,80,.16), transparent 60%),
        linear-gradient(180deg, rgba(5,7,14,.62), rgba(5,7,14,.88) 58%, rgba(5,7,14,.96)),
        url('assets/hero.jpg') center/cover no-repeat;
      filter:saturate(1.05) contrast(1.04);
      transform:translateZ(0);
    }
    .hero-aurora{ /* animated aurora layer */
      position:absolute; inset:-20% -10%; z-index:1; pointer-events:none; opacity:.32;
      background:
        radial-gradient(50% 60% at 30% 40%, rgba(95,180,255,.15), transparent 60%),
        radial-gradient(40% 50% at 70% 30%, rgba(255,120,200,.12), transparent 65%),
        radial-gradient(55% 55% at 60% 70%, rgba(120,255,180,.12), transparent 60%);
      mix-blend-mode:screen;
      animation:aurora 16s ease-in-out infinite alternate;
    }
    @keyframes aurora{0%{transform:translate3d(-2%, -1%, 0) scale(1.02)}100%{transform:translate3d(2%, 1%, 0) scale(1.06)}}
    .hero-grain{position:absolute;inset:0;z-index:2;opacity:.20;mix-blend-mode:overlay;pointer-events:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E")}
    .hero-layer{
      position:relative; z-index:4;
      padding:calc(var(--g8) + 8vh) var(--g5) var(--g7);
      display:grid; gap:var(--g4); align-content:end; max-width:1180px; margin-inline:auto
    }
    .fx-fade{opacity:0; transform:translateY(10px); animation:fadeIn var(--t) var(--bez) .06s forwards}
    .fx-fade-delayed{opacity:0; transform:translateY(12px); animation:fadeIn var(--t) var(--bez) .22s forwards}
    @keyframes fadeIn{to{opacity:1; transform:none}}
    .cta-row{display:flex;gap:var(--g3);flex-wrap:wrap}

    /* --------- Buttons */
    .btn{appearance:none; border:1px solid rgba(255,255,255,.12); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); color:var(--text); padding:12px 18px; border-radius:14px; transition:transform var(--t) var(--bez), box-shadow var(--t) var(--bez), background var(--t) var(--bez); will-change:transform}
    .btn:hover{transform:translateY(-2px)}
    .btn-lg{padding:14px 22px; font-size:1.06rem; font-weight:650}
    .btn-primary{border-color:rgba(160,170,255,.28); background:linear-gradient(180deg, rgba(150,160,255,.18), rgba(140,150,250,.10)); box-shadow:0 10px 26px rgba(120,140,255,.10)}
    .btn-secondary{background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02))}
    .btn-ghost{background:transparent; border-color:transparent; opacity:.9}
    .btn-block{width:100%}

    /* --------- App */
    .app{max-width:760px;margin:auto}
    .progress{height:9px;background:rgba(255,255,255,.07);border-radius:999px;overflow:hidden;margin:0 0 var(--g4)}
    .progress-bar{height:100%;width:0;background:linear-gradient(90deg, var(--amber), var(--green))}
    .step{display:none} .step.active{display:block}
    .step-hint{color:var(--muted);margin-bottom:var(--g2)}
    .options{display:grid;gap:var(--g3);grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}
    .opt{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.12); padding:16px 16px; border-radius:16px; cursor:pointer; transition:transform var(--t) var(--bez), border-color var(--t) var(--bez)}
    .opt:hover{transform:translateY(-2px); border-color:rgba(160,170,255,.3)}
    .opt[aria-checked="true"]{outline:2px solid var(--accent); outline-offset:2px}
    .result{padding:var(--g5);border-radius:20px;border:1px solid rgba(255,255,255,.12);margin-top:var(--g4); background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02))}
    .result.red{box-shadow:0 14px 42px rgba(255,77,77,.18)}
    .result.amber{box-shadow:0 14px 42px rgba(255,204,51,.18)}
    .result.green{box-shadow:0 14px 42px rgba(46,204,113,.18)}

    /* --------- Chips */
    .ampel-chips{display:flex;gap:var(--g3);padding:0;list-style:none;flex-wrap:wrap}
    .chip{display:inline-block;border-radius:999px;padding:6px 12px;font-weight:700;font-size:.94rem;letter-spacing:.2px}
    .chip-red{background:color-mix(in srgb, var(--red) 26%, rgba(255,255,255,.06))}
    .chip-amber{background:color-mix(in srgb, var(--amber) 32%, rgba(255,255,255,.06))}
    .chip-green{background:color-mix(in srgb, var(--green) 32%, rgba(255,255,255,.06))}
    .pulse-soft{animation:pulse 3.2s ease-in-out infinite}
    @keyframes pulse{0%,100%{filter:saturate(1)}50%{filter:saturate(1.22)}}

    /* --------- Sticky CTA */
    .sticky-cta{position:fixed; left:0; right:0; bottom:0; z-index:35; padding:var(--g3); background:rgba(7,10,18,.88); border-top:1px solid rgba(255,255,255,.08); backdrop-filter:blur(10px)}

    /* --------- Dialog */
    .dialog::backdrop{background:rgba(0,0,0,.6)}
    .dialog{border:none; border-radius:18px; padding:var(--g5); background:#0f141d; color:var(--text); width:min(680px,92vw); box-shadow:0 30px 80px rgba(0,0,0,.5)}
    .input{width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.15); background:#0c1017; color:var(--text)}
    .dialog-actions{display:flex; gap:var(--g3); justify-content:flex-end}
    .seg-row{display:flex; gap:var(--g2); flex-wrap:wrap}
    .seg{border:1px solid rgba(255,255,255,.15); background:#111623; color:var(--text); padding:8px 12px; border-radius:999px; cursor:pointer}

    /* --------- Responsive */
    @media (max-width:960px){
      .hero{min-height:88svh}
      .hero-layer{padding:calc(var(--g7) + 10vh) var(--g5) var(--g6)}
      .options{grid-template-columns:1fr}
    }
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important}
      .hero::before,.hero::after{display:none}
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Zum Inhalt springen</a>
  <noscript><style>.site-header{opacity:1;transform:none}.sticky-cta{display:block}</style></noscript>

  <!-- Header -->
  <header id="hdr" class="site-header" aria-hidden="true">
    <a class="brand" href="/" aria-label="Start">HH·2026</a>
    <nav class="nav" aria-label="Hauptnavigation">
      <a href="#ampel" class="nav-link">Ampel</a>
      <a href="#fuer-wen" class="nav-link">Für wen?</a>
      <a href="#grenze" class="nav-link">Erwartungsgrenze</a>
      <a href="#stories" class="nav-link">Stories</a>
    </nav>
    <button id="ctaTop" class="btn btn-primary" type="button">⚡ Ampel starten</button>
  </header>

  <main id="main">
    <!-- Hero -->
    <section id="hero" class="hero" aria-label="Einstieg">
      <div class="hero-art" id="heroArt"></div>
      <div class="hero-aurora" id="heroAurora" aria-hidden="true"></div>
      <div class="hero-grain" aria-hidden="true"></div>
      <div class="hero-layer">
        <h1 class="fx-fade js-hero-emotional">Es gibt diesen Moment,<br/>in dem man still denkt:<br/><em>Da fehlt noch etwas.</em></h1>
        <h1 class="fx-fade js-hero-functional hidden">2&nbsp;Minuten. 3&nbsp;Fragen. Ergebnis: <em>Rot · Gelb · Grün</em></h1>
        <p class="micro fx-fade-delayed">Kein Drama. Nur kurz einordnen.</p>
        <div class="cta-row fx-fade-delayed">
          <button id="ctaHero" class="btn btn-primary btn-lg" type="button">⚡ 2&nbsp;Minuten ansehen</button>
          <a href="#exit" class="btn btn-ghost">Später. Einfach schließen.</a>
        </div>
      </div>
    </section>

    <!-- Intro -->
    <section class="section section-alt">
      <p class="lead">Heute nicht alles lösen. Nur sehen, <strong>wo</strong> man steht.</p>
    </section>

    <!-- Expectations -->
    <section id="grenze" class="section">
      <h2>Was hier nicht passiert</h2>
      <ul class="list-clean cols-2">
        <li>kein Gespräch</li><li>kein Kontakt</li><li>keine Daten</li><li>kein Nachfassen</li><li>kein Verkauf</li>
      </ul>
      <p class="micro muted">Nur Orientierung für heute. Nicht mehr.</p>
    </section>

    <!-- System -->
    <section id="ampel" class="section section-alt">
      <h2>Der kurze Blick</h2>
      <p>In <strong>2 Minuten</strong>, <strong>3 Fragen</strong>. Ergebnis: <strong>Rot</strong>, <strong>Gelb</strong> oder <strong>Grün</strong> – plus Plan: <em>Jetzt · Als Nächstes · Später</em>.</p>
      <ul class="ampel-chips" role="list">
        <li class="chip chip-red pulse-soft">Rot · Jetzt handeln</li>
        <li class="chip chip-amber">Gelb · Im Blick</li>
        <li class="chip chip-green">Grün · Entspannt</li>
      </ul>
    </section>

    <!-- App -->
    <section id="check" class="section">
      <h2>In 2 Minuten sehen, wo du heute stehst</h2>
      <div id="ampelApp" class="card app" role="region" aria-label="Ampel-Check">
        <div class="progress" aria-hidden="true"><div id="progressBar" class="progress-bar" style="width:0%"></div></div>

        <div id="step1" class="step active" data-step="1">
          <p class="step-hint">Intuition reicht.</p>
          <h3>6&nbsp;Monate Ausfall – wie sicher wäre euer Einkommen?</h3>
          <div class="options" role="radiogroup" aria-label="Einkommen">
            <button class="opt" role="radio" aria-checked="false" data-score="2" type="button">Sehr sicher</button>
            <button class="opt" role="radio" aria-checked="false" data-score="1" type="button">Teils/unsicher</button>
            <button class="opt" role="radio" aria-checked="false" data-score="0" type="button">Keine Ahnung</button>
          </div>
        </div>

        <div id="step2" class="step" data-step="2">
          <p class="step-hint">Intuition reicht.</p>
          <h3>Wer hängt finanziell an dir?</h3>
          <div class="options" role="radiogroup" aria-label="Abhängige">
            <button class="opt" role="radio" aria-checked="false" data-score="0" type="button">Nur ich</button>
            <button class="opt" role="radio" aria-checked="false" data-score="1" type="button">Partner</button>
            <button class="opt" role="radio" aria-checked="false" data-score="2" type="button">Partner + Kind(er)/Team</button>
          </div>
        </div>

        <div id="step3" class="step" data-step="3">
          <p class="step-hint">Intuition reicht.</p>
          <h3>Notgroschen / Puffer – wie viele Monate?</h3>
          <div class="options" role="radiogroup" aria-label="Puffer">
            <button class="opt" role="radio" aria-checked="false" data-score="2" type="button">6+ Monate</button>
            <button class="opt" role="radio" aria-checked="false" data-score="1" type="button">2–5 Monate</button>
            <button class="opt" role="radio" aria-checked="false" data-score="0" type="button">Unter 2 Monate</button>
          </div>
        </div>

        <div id="result" class="result hidden" tabindex="-1" aria-live="polite"></div>
        <div class="cta-row" style="justify-content:flex-end">
          <button class="btn btn-secondary" id="restartAmpel" type="button">Neu starten</button>
        </div>
      </div>
      <p class="micro muted" id="exit">„Nichts tun ist ok. Hauptsache, du weißt, wo du stehst.“</p>
    </section>

    <!-- Für wen -->
    <section id="fuer-wen" class="section section-alt grid">
      <div>
        <h2>Für wen ist das?</h2>
        <p>Eltern, Paare, Selbstständige, ADHS/Overthinker & Skeptiker – <em>Klarheit ohne Verkauf</em>.</p>
      </div>
      <ul class="cards" role="list">
        <li class="card"><h3>Eltern</h3><p>Safety-Loop beruhigen: in 2 Minuten wissen, wo ihr steht.</p></li>
        <li class="card"><h3>Paare</h3><p>Gemeinsam entscheiden – ohne Druck, ohne Tarif-Gerede.</p></li>
        <li class="card"><h3>Selbstständige</h3><p>Ausfall-Risiko im Blick; klare To-Dos statt Bürokratie.</p></li>
        <li class="card"><h3>ADHS/Overthinker</h3><p>1 Gedanke pro Screen – klare Schritte.</p></li>
        <li class="card"><h3>Skeptiker</h3><p>Transparenz, Kontrolle, „Was NICHT passiert“ – ganz oben.</p></li>
      </ul>
    </section>

    <!-- Nächste Schritte -->
    <section class="section">
      <h2>Wenn dein Ergebnis Fragen öffnet</h2>
      <div class="cta-row">
        <button class="btn btn-primary" data-book type="button">20-Minuten in Ruhe</button>
        <button class="btn btn-secondary" data-whatsapp type="button">WhatsApp-Kurzfrage</button>
        <button class="btn" data-ref type="button">Weitergeben</button>
      </div>
      <p class="micro muted">Nur, wenn <em>du</em> willst.</p>
    </section>

    <!-- Stimmen -->
    <section id="stories" class="section">
      <h2>Stimmen</h2>
      <ul class="cards" role="list">
        <li class="card"><p>„In 2 Minuten wussten wir, wo wir stehen.“</p><p class="micro muted">Eltern</p></li>
        <li class="card"><p>„Endlich Struktur ohne Verkaufsdruck.“</p><p class="micro muted">Selbstständig</p></li>
        <li class="card"><p>„Null Bullshit. Nur Orientierung.“</p><p class="micro muted">Skeptiker</p></li>
      </ul>
    </section>
  </main>

  <footer class="site-footer section"><p class="micro muted">Zero-Sales. 100 % Kontrolle.</p></footer>

  <!-- Sticky CTA -->
  <div id="stickyCta" class="sticky-cta" hidden>
    <button class="btn btn-primary btn-block" data-start type="button">⚡ Ampel starten</button>
  </div>

  <!-- Share Dialog -->
  <dialog id="refDialog" class="dialog" aria-labelledby="refTitle">
    <form method="dialog">
      <h3 id="refTitle">Weitergeben – in 2 Klicks</h3>
      <div class="seg-row" role="tablist" aria-label="Zielgruppe wählen">
        <button class="seg" data-seg="neutral" type="button">Für alle</button>
        <button class="seg" data-seg="eltern" type="button">Eltern</button>
        <button class="seg" data-seg="kollegen" type="button">Kolleg:innen</button>
        <button class="seg" data-seg="freunde" type="button">Freunde</button>
        <button class="seg" data-seg="selbst" type="button">Selbstständige</button>
        <button class="seg" data-seg="partner" type="button">Partner</button>
      </div>
      <label class="micro" for="refText">Nachricht</label>
      <textarea id="refText" class="input" rows="5"></textarea>
      <div class="dialog-actions">
        <button class="btn" value="cancel" type="button" onclick="this.closest('dialog').close()">Schließen</button>
        <a id="waShare" class="btn btn-primary" target="_blank" rel="noopener" href="#">Per WhatsApp teilen</a>
        <button class="btn btn-secondary" id="sysShare" type="button">Teilen…</button>
      </div>
      <p class="micro muted" style="margin-top:.6rem" id="shareStatus" aria-live="polite"></p>
    </form>
  </dialog>

  <script>
    // helpers
    const $=(s,c=document)=>c.querySelector(s), $$=(s,c=document)=>Array.from(c.querySelectorAll(s));
    const on=(el,ev,fn,opt)=>el&&el.addEventListener(ev,fn,opt);
    const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Header/Sticky gate + Nav spy
    function gate(){
      const hero=$('#hero'), hdr=$('#hdr'), sticky=$('#stickyCta');
      if(!hero||!hdr) return;
      const io=new IntersectionObserver(([e])=>{
        const show=!e.isIntersecting;
        hdr.classList.toggle('revealed', show);
        hdr.setAttribute('aria-hidden', String(!show));
        if(sticky) sticky.hidden=!show;
      },{threshold:0.14});
      io.observe(hero);
    }

    // Hero AB + Parallax
    function heroAB(){
      const mode = new URLSearchParams(location.search).get('ab');
      const emo = $('.js-hero-emotional'), fun = $('.js-hero-functional');
      if(emo&&fun){ const functional = mode==='functional'; emo.classList.toggle('hidden', functional); fun.classList.toggle('hidden', !functional); }
    }
    function heroParallax(){
      if(reduce) return;
      const art=$("#heroArt"), aur=$("#heroAurora");
      let y=0, ticking=false;
      const onScroll=()=>{ y=window.scrollY||0; if(!ticking){ requestAnimationFrame(()=>{ const t=Math.min(1, y/600); art && (art.style.transform=`translateY(${t* -10}px) scale(1.01)`); aur && (aur.style.transform=`translateY(${t* 8}px) scale(${1.04+t*0.02})`); ticking=false; }); ticking=true; } };
      on(window,'scroll',onScroll,{passive:true}); onScroll();
    }

    // Ampel
    const state={step:1,maxStep:3,score:0,answers:[]};
    function progress(){ const bar=$('#progressBar'); if(bar) bar.style.width=`${((state.step-1)/state.maxStep)*100}%`; }
    function setSel(stepEl, idx){ const opts=$$('.opt',stepEl); opts.forEach((b,i)=>{ const c=i===idx; b.setAttribute('aria-checked', String(c)); b.tabIndex=c?0:-1; }); }
    function step(n){ $$('#ampelApp .step').forEach(s=>s.classList.remove('active')); const el=$('#step'+n); if(el){ el.classList.add('active'); state.step=n; progress(); const first=$('.opt',el); first&&(first.focus(), setSel(el,0)); } }
    function finish(){
      const s=state.score; let tier='red', title='Rot – Jetzt handeln', now='1–2 Themen zuerst klären.', next='Dann kleine Schritte (30–60 Min).', later='Später Feinschliff.';
      if(s>=5){ tier='green'; title='Grün – Entspannt bleiben'; now='Alles Wichtige wirkt stabil.'; next='Optional: kleiner Feinschliff.'; later='In 6–12 Monaten erneut prüfen.'; }
      else if(s>=3){ tier='amber'; title='Gelb – Gut unterwegs'; now='2 Dinge verdienen kurz Fokus.'; next='Kleiner Plan bringt Ruhe.'; later='Danach entspannt laufen lassen.'; }
      const r=$('#result'); if(!r) return;
      r.className=`result ${tier}`; r.innerHTML=`<h3>${title}</h3>
        <p><strong>Jetzt:</strong> ${now}</p>
        <p><strong>Als Nächstes:</strong> ${next}</p>
        <p><strong>Später:</strong> ${later}</p>
        <div class="cta-row" style="margin-top:16px">
          <button class="btn btn-primary" data-book type="button">20-Minuten in Ruhe</button>
          <button class="btn btn-secondary" data-whatsapp type="button">WhatsApp-Kurzfrage</button>
          <button class="btn" data-ref type="button">Weitergeben</button>
        </div>`;
      r.classList.remove('hidden'); setTimeout(()=>r.focus(),40);
      if(tier==='green' && !reduce){ try{ confetti(28);}catch{} }
    }
    function pick(btn){
      const v=Number(btn.dataset.score||0); state.score+=v; state.answers.push(v);
      const wrap=btn.closest('.step'); if(wrap){ const idx=$$('.opt',wrap).indexOf(btn); setSel(wrap,idx); }
      const next=state.step+1; if(next<=state.maxStep){ step(next); } else { const bar=$('#progressBar'); if(bar) bar.style.width='100%'; finish(); }
    }
    function restart(){
      state.step=1; state.score=0; state.answers.length=0; $('#result')?.classList.add('hidden'); step(1);
      const check=$('#check'); if(check) scrollTo({top:check.offsetTop-60, behavior:'smooth'});
    }
    function bindAmpel(){
      if(!$('#ampelApp')) return;
      on($('#ampelApp'),'click',e=>{ const b=e.target.closest('.opt'); if(b) pick(b); });
      $$('#ampelApp .step').forEach(s=>{
        on(s,'keydown',e=>{
          if(!s.classList.contains('active')) return;
          const opts=$$('.opt',s); if(!opts.length) return;
          let i=opts.findIndex(b=>b.getAttribute('aria-checked')==='true'); if(i<0) i=0;
          if(e.key==='ArrowRight'||e.key==='ArrowDown'){ e.preventDefault(); i=(i+1)%opts.length; opts[i].focus(); setSel(s,i); }
          if(e.key==='ArrowLeft'||e.key==='ArrowUp'){ e.preventDefault(); i=(i-1+opts.length)%opts.length; opts[i].focus(); setSel(s,i); }
          if([' ','Enter'].includes(e.key)){ e.preventDefault(); pick(opts[i]); }
          if(e.key==='Escape'){ e.preventDefault(); $('#restartAmpel')?.focus(); }
        });
      });
      ['#ctaTop','#ctaHero','[data-start]','#restartAmpel'].forEach(sel=> $$(sel).forEach(el=> on(el,'click',restart)));
      progress(); step(1);
    }

    // Share
    const SEG={neutral:["2-Minuten-Blick, anonym – zeigt nur Status. {{URL}}","Ruhig & ohne Druck: schneller Status. {{URL}}"],
               eltern:["Kurz & ruhig: zeigt, ob heute etwas fehlt – ohne Verkauf. {{URL}}"],
               kollegen:["Fixer Blick für die To-do-Liste – sofort sehen, ob was fehlt. {{URL}}"],
               freunde:["Null Druck, nur Orientierung in 2 Minuten. {{URL}}"],
               selbst:["Kurzer Status heute, ohne Papierkram. {{URL}}"],
               partner:["Magst du 2 Minuten schauen? Ampel zeigt nur den Status. {{URL}}"]};
    function openShare(seg='neutral'){
      const dlg=$('#refDialog'),wa=$('#waShare'),ta=$('#refText'),sys=$('#sysShare'),st=$('#shareStatus');
      const url=new URL('/',location.origin).toString();
      const pick=a=>a[Math.floor(Math.random()*a.length)];
      const base=(SEG[seg]||SEG.neutral), msg=(Array.isArray(base)?pick(base):base).replace('{{URL}}',url);
      if(ta) ta.value=msg; if(wa) wa.href=`https://wa.me/?text=${encodeURIComponent(msg)}`;
      on(sys,'click',async()=>{ try{ if(navigator.share){ await navigator.share({text:msg, url}); st&&(st.textContent='Geteilt.'); } else { window.open(wa.href,'_blank','noopener'); } }catch{ st&&(st.textContent='Teilen abgebrochen.'); } },{once:true});
      if(dlg?.showModal) dlg.showModal(); else window.open(wa.href,'_blank','noopener');
    }
    function bindShare(){
      on(document,'click',e=>{
        const ref=e.target.closest('[data-ref]'); if(ref) openShare();
        const seg=e.target.closest('.seg'); if(seg){ const key=seg.dataset.seg||'neutral'; const ta=$('#refText'), wa=$('#waShare'); const msg=(SEG[key]?.[0]||SEG.neutral[0]).replace('{{URL}}',location.href); if(ta) ta.value=msg; if(wa) wa.href=`https://wa.me/?text=${encodeURIComponent(msg)}`; }
      });
    }

    // Helpers
    function confetti(count=24){
      const root=document.createElement('div'); Object.assign(root.style,{position:'fixed',inset:'0',pointerEvents:'none',overflow:'hidden',zIndex:60}); document.body.append(root);
      for(let i=0;i<count;i++){
        const s=document.createElement('span'); s.textContent='•';
        Object.assign(s.style,{position:'absolute',left:Math.random()*100+'%',top:'-12px',fontSize:(10+Math.random()*14)+'px',color:['#9af','#6f6','#fd5','#fff'][i%4]});
        root.append(s); const d=700+Math.random()*900;
        s.animate([{transform:'translateY(0)'},{transform:`translateY(${innerHeight}px)`}],{duration:d,easing:'cubic-bezier(.2,.8,.2,1)'}); setTimeout(()=>s.remove(),d+120);
      }
      setTimeout(()=>root.remove(),1800);
    }

    // Init
    document.addEventListener('DOMContentLoaded',()=>{
      heroAB(); gate(); heroParallax(); bindAmpel(); bindShare();
    },{once:true});
  </script>
</body>
</html>
