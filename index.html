<!-- =======================================================================
/index.html  (Startseite)
======================================================================= -->
<!DOCTYPE html>
<html lang="de" translate="no" class="no-js">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Ruhige Finanz-Ampel â€“ 2-Minuten-Check</title>
  <meta name="description" content="Finanz-Ampel: anonym, klar, ohne Verkauf. In 2 Minuten bekommst du ein GefÃ¼hl: Rot Â· Gelb Â· GrÃ¼n." />
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <a class="skip-link" href="#main">Zum Inhalt springen</a>

  <header class="site-header" role="banner">
    <div class="wrap header-bar">
      <a class="brand" href="/" aria-label="Startseite">
        <span class="brand-dot" aria-hidden="true"></span>
        <span class="brand-name">Ruhige Finanz-Ampel</span>
        <span class="brand-tag">anonym Â· Klarheit Â· kein Verkauf</span>
      </a>
      <nav class="site-nav" aria-label="Hauptnavigation">
        <ul>
          <li><a href="#quiz" class="nav-link">Finanz-Check</a></li>
          <li><a href="weitergeben.html#referral-engine" class="nav-link">Weitergeben</a></li>
          <li><a href="#contact" class="nav-link">Kontakt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section id="hero" class="hero section" aria-labelledby="hero-title">
      <div class="wrap hero-wrap">
        <div>
          <h1 id="hero-title">Ruhig Klarheit holen â€“ in 2 Minuten.</h1>
          <p class="hero-micro">Anonym. Kein Verkauf. Du siehst sofort: Rot Â· Gelb Â· GrÃ¼n.</p>

          <div class="ampel" aria-label="Ampel">
            <span class="ampel-light ampel-red" aria-hidden="true"></span>
            <span class="ampel-light ampel-yellow" aria-hidden="true"></span>
            <span class="ampel-light ampel-green" aria-hidden="true"></span>
          </div>

          <p class="social-proof" aria-live="polite">â­ 4,9 / 250+ Menschen</p>

          <div class="hero-ctas">
            <button id="hero-cta" class="btn btn-primary tap-scale" data-track="cta_start_check" data-target="#quiz">Jetzt 2-Minuten-Check starten</button>
            <button class="btn btn-secondary calm" data-action="open-preview">Erst in Ruhe anschauen</button>
          </div>

          <p class="tone-note">
            Wie eine Netflix-Doku fÃ¼r Finanzen: ruhig, klar, ohne Druck.
            <span class="auto-key">anonym</span>, mehr <span class="auto-key">Ruhe</span>, echte <span class="auto-key">Klarheit</span>. <span class="auto-key">Vorteil</span>: 0 Risiko.
          </p>
        </div>
      </div>
    </section>

    <!-- Decision Anchor Bar -->
    <div class="decision-anchor" id="decision-anchor" role="note" aria-live="polite">
      ğŸ”’ 100 % anonym Â· Kein Verkauf Â· 25 â‚¬ Garantie
    </div>

    <!-- Sticky CTA -->
    <div class="sticky-cta" id="sticky-cta" aria-hidden="true">
      <div class="inner">
        <button class="btn btn-primary tap-scale" data-track="cta_sticky" data-target="#quiz">
          ğŸ‘‰ Finanz-Check starten und Klarheit gewinnen
        </button>
      </div>
    </div>

    <!-- 2) NEURO-UX SYSTEME -->
    <section id="neuro-ux" class="neuro wrap">
      <div class="proof">
        <div class="proof-item">
          <div class="proof-top"><span>Vertrauen</span><strong>98 %</strong></div>
          <div class="proof-bar" data-value="98"><span></span></div>
        </div>
        <div class="proof-item">
          <div class="proof-top"><span>Klarheit</span><strong>92 %</strong></div>
          <div class="proof-bar" data-value="92"><span></span></div>
        </div>
        <div class="proof-item">
          <div class="proof-top"><span>Empfehlung</span><strong>91 %</strong></div>
          <div class="proof-bar" data-value="91"><span></span></div>
        </div>
      </div>

      <div class="live-feed" aria-live="polite" aria-atomic="true">
        <ul id="live-messages">
          <li>â€Sandra (31) hat gerade ihre Ampel gemacht.â€œ</li>
          <li>â€Leon (27) spart 420 â‚¬ im Jahr.â€œ</li>
          <li>â€Heute schon 18 Menschen Klarheit gewonnen.â€œ</li>
        </ul>
      </div>

      <div class="micro-t" aria-label="Kurzstimmen">
        <figure class="micro">
          <blockquote>â€HÃ¤tte nie gedacht, dass 2 Minuten so viel Ruhe bringen.â€œ</blockquote>
          <figcaption>â€“ Lisa, 29</figcaption>
        </figure>
        <figure class="micro">
          <blockquote>â€Endlich Ruhe im Kopf â€“ wir wissen, was heute wichtig ist.â€œ</blockquote>
          <figcaption>â€“ Jan, 37</figcaption>
        </figure>
        <figure class="micro">
          <blockquote>â€Wir sparen 420 â‚¬ im Jahr und fÃ¼hlen uns sicherer.â€œ</blockquote>
          <figcaption>â€“ Miriam &amp; Paul</figcaption>
        </figure>
      </div>

      <article class="storyblock">
        <h2>Warum tun sich so viele damit schwer?</h2>
        <ul class="bullets">
          <li>Mental Load: Alltag lÃ¤uft Ã¼ber. Kopf voll.</li>
          <li>Unsicherheit: â€Mache ich es richtig?â€œ</li>
          <li>Fachsprache: zu viel Kauderwelsch.</li>
          <li>Stress: Entscheidungen werden geschoben.</li>
        </ul>
        <p>
          Die Finanz-Ampel ist ein kleines <strong>Ruhe-System</strong>. Zwei Fragen. Ampel an. Du siehst sofort: Rot, Gelb oder GrÃ¼n.
          Ohne Datenformulare, <span class="auto-key">anonym</span>, <span class="auto-key">kein Verkauf</span>.
          Du nimmst <span class="auto-key">Klarheit</span> mit â€“ in <span class="auto-key">2 Minuten</span>.
        </p>
      </article>
    </section>

    <!-- 3) PERSONA SYSTEM -->
    <section id="personas" class="personas" aria-labelledby="personas-title">
      <div class="wrap">
        <h2 id="personas-title">FÃ¼r wen fÃ¼hlt sich das richtig an?</h2>

        <div class="persona-grid">
          <article class="persona-card" tabindex="0">
            <h3>Familie</h3>
            <p>Wenig Zeit. Viel Verantwortung. Mental Load hoch. Geld bleibt liegen? Die Ampel bringt Ruhe rein.</p>
            <ul class="persona-points">
              <li>Schneller Blick am Abend</li>
              <li>Klar: Jetzt Â· Als NÃ¤chstes Â· SpÃ¤ter</li>
              <li>Ohne Papierkram, <span class="auto-key">anonym</span></li>
            </ul>
          </article>

          <article class="persona-card" tabindex="0">
            <h3>SelbststÃ¤ndig</h3>
            <p>Unsicherheit bei Ausfall? Einnahmen schwanken? Zwei Fragen zeigen, wo heute Risiko lauert.</p>
            <ul class="persona-points">
              <li>0 Druck, <span class="auto-key">kein Verkauf</span></li>
              <li>Schnell sortieren, dann weiter</li>
              <li><span class="auto-key">Vorteil</span>: klare PrioritÃ¤t</li>
            </ul>
          </article>

          <article class="persona-card" tabindex="0">
            <h3>Angestellt</h3>
            <p>Viel los im Job. Privat soll es einfach sein. Die Ampel zeigt, ob heute etwas fehlt â€“ zero-pressure.</p>
            <ul class="persona-points">
              <li>2 Klicks, Ergebnis da</li>
              <li>Mehr <span class="auto-key">Klarheit</span> im Alltag</li>
              <li>Alles bleibt <span class="auto-key">anonym</span></li>
            </ul>
          </article>
        </div>

        <p class="persona-note">Wortwahl 2026: alltagstauglich, kurz, ohne Fachchinesisch.</p>
      </div>
    </section>

    <!-- 4) QUIZ WIZARD -->
    <section id="quiz" class="quiz" aria-labelledby="quiz-title">
      <div class="wrap">
        <h2 id="quiz-title">Der 2-Fragen-Check</h2>
        <p class="quiz-tag">ADHS-freundlich Â· groÃŸe Buttons Â· 2 Minuten</p>

        <div class="progress" aria-label="Fortschritt">
          <div class="progress-track" aria-hidden="true"></div>
          <div class="progress-bar" style="width:0%" data-progress></div>
          <div class="progress-text" aria-live="polite"><span data-step>1</span>/3</div>
        </div>

        <section class="quiz-step" data-step="1" aria-labelledby="q1">
          <h3 id="q1">Wenn du 6 Monate ausfallen wÃ¼rdest â€“ wie sicher wÃ¤re euer Einkommen?</h3>
          <div class="answers">
            <button class="btn tap-scale answer" data-value="rot">Keine Ahnung</button>
            <button class="btn tap-scale answer" data-value="gelb">Unsicher</button>
            <button class="btn tap-scale answer" data-value="gruen">Passt</button>
          </div>
        </section>

        <section class="quiz-step" data-step="2" aria-labelledby="q2" hidden>
          <h3 id="q2">Findest du wichtige Unterlagen fix, wenn du sie brauchst?</h3>
          <div class="answers">
            <button class="btn tap-scale answer" data-value="rot">Keine Ahnung</button>
            <button class="btn tap-scale answer" data-value="gelb">Unsicher</button>
            <button class="btn tap-scale answer" data-value="gruen">Passt</button>
          </div>
        </section>

        <section class="quiz-step" data-step="3" aria-labelledby="q3" hidden>
          <h3 id="q3">FÃ¼hlst du dich bei Zukunft &amp; Alter sicher?</h3>
          <div class="answers">
            <button class="btn tap-scale answer" data-value="rot">Keine Ahnung</button>
            <button class="btn tap-scale answer" data-value="gelb">Unsicher</button>
            <button class="btn tap-scale answer" data-value="gruen">Passt</button>
          </div>
        </section>

        <section class="quiz-result" id="quiz-result" hidden aria-live="polite">
          <h3 id="quiz-result-title">Ergebnis</h3>
          <p id="quiz-result-text"></p>

          <div id="quiz-slots" class="slots"></div>

          <div class="result-ctas">
            <a href="weitergeben.html#referral-engine" class="btn btn-secondary">Weitergeben</a>
            <a href="#contact" class="btn btn-primary tap-scale" data-track="cta_book_15">15-Minuten-Check buchen</a>
          </div>
        </section>
      </div>
    </section>

    <!-- REFERRAL TEASER -->
    <section id="referral" class="referral" aria-labelledby="ref-title">
      <div class="wrap">
        <h2 id="ref-title">Weitergeben â€“ ganz ohne ErklÃ¤ren</h2>
        <p>Link senden. Die Person sieht die Ampel selbst â€“ <span class="auto-key">anonym</span>, <span class="auto-key">kein Verkauf</span>. In <span class="auto-key">2 Minuten</span> ist ein GefÃ¼hl da.</p>
        <ul class="ref-list">
          <li>Ruhig starten. Kein Druck.</li>
          <li>Kurztext zum Kopieren ist dabei.</li>
          <li><span class="auto-key">Vorteil</span>: 25 â‚¬ Garantie, falls es nicht hilft.</li>
        </ul>
        <div class="ref-cta">
          <a href="weitergeben.html#referral-engine" class="btn btn-primary tap-scale">Text anzeigen</a>
          <a href="#quiz" class="btn btn-secondary">Erst Klarheit holen</a>
        </div>
      </div>
    </section>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav" aria-label="Untere Navigation">
      <a href="#hero" class="nav-item" aria-label="Home">ğŸ  <span>Home</span></a>
      <a href="#quiz" class="nav-item" aria-label="Finanzcheck">ğŸš¦ <span>Finanzcheck</span></a>
      <a href="weitergeben.html#referral-engine" class="nav-item" aria-label="Weitergeben">ğŸ’¬ <span>Weitergeben</span></a>
      <a href="#contact" class="nav-item" aria-label="Kontakt">ğŸ“ <span>Kontakt</span></a>
    </nav>

    <!-- CONTACT -->
    <section id="contact" class="contact">
      <div class="wrap">
        <h2>Kontakt â€“ kurz & ruhig</h2>
        <p>Kurzer Austausch? Schreib eine Nachricht. Kein Druck, <span class="auto-key">kein Verkauf</span>.</p>
        <ul class="contact-list">
          <li><a href="mailto:hi@example.com">hi@example.com</a></li>
          <li><a href="tel:+490000000000">+49 000 0000000</a></li>
        </ul>
        <p class="legal">Â© <span data-year></span> Ruhige Finanz-Ampel Â· Impressum Â· Datenschutz</p>
      </div>
    </section>
  </main>

  <script defer src="assets/app.js"></script>
</body>
</html>

<!-- =======================================================================
/weitergeben.html
======================================================================= -->
<!DOCTYPE html>
<html lang="de" translate="no" class="no-js">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Weitergeben â€“ ruhig, klar, zero-pressure</title>
  <meta name="description" content="Weitergeben â€“ ohne etwas erklÃ¤ren zu mÃ¼ssen. Die Ampel spricht fÃ¼r dich. 2 Minuten. anonym. kein Verkauf. FÃ¼r Freunde, Familie, Kollegen. Ruhig. Klar. Zero-pressure." />
  <meta property="og:title" content="Weitergeben â€“ ohne etwas erklÃ¤ren zu mÃ¼ssen." />
  <meta property="og:description" content="Die Ampel spricht fÃ¼r dich. 2 Minuten. anonym. kein Verkauf." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="de_DE" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <a class="skip-link" href="#main">Zum Inhalt springen</a>

  <header class="site-header" role="banner">
    <div class="wrap header-bar">
      <a class="brand" href="/" aria-label="Startseite">
        <span class="brand-dot" aria-hidden="true"></span>
        <span class="brand-name">Ruhige Finanz-Ampel</span>
        <span class="brand-tag">anonym Â· Klarheit Â· kein Verkauf</span>
      </a>
      <nav class="site-nav" aria-label="Hauptnavigation">
        <ul>
          <li><a href="/#quiz" class="nav-link">Finanz-Check</a></li>
          <li><a href="#referral-engine" class="nav-link">Weitergeben</a></li>
          <li><a href="#contact" class="nav-link">Kontakt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section id="hero" class="hero section" aria-labelledby="hero-title">
      <div class="wrap hero-wrap">
        <h1 id="hero-title">Weitergeben â€“ ohne etwas erklÃ¤ren zu mÃ¼ssen.</h1>
        <p class="subhead">Die Ampel spricht fÃ¼r dich. 2 Minuten. anonym. kein Verkauf.</p>
        <div class="hero-benefits">
          <span class="chip">ruhig</span>
          <span class="chip">einfach</span>
          <span class="chip">zero-pressure</span>
          <span class="chip">Klarheit</span>
          <span class="chip">Vorteil: 25 â‚¬ Garantie</span>
        </div>
      </div>
    </section>

    <!-- Decision Anchor -->
    <div class="decision-anchor" id="decision-anchor" role="note" aria-live="polite">
      ğŸ”’ 100 % anonym Â· Kein Verkauf Â· 25 â‚¬ Garantie
    </div>

    <!-- Sticky CTA -->
    <div class="sticky-cta" id="sticky-cta" aria-hidden="true">
      <div class="inner">
        <button class="btn btn-primary tap-scale" data-target="#referral-engine">
          ğŸ‘‰ Jetzt ruhig weitergeben
        </button>
      </div>
    </div>

    <!-- REFERRAL ENGINE -->
    <section id="referral-engine" class="section referral-engine" aria-labelledby="ref2-title">
      <div class="wrap">
        <h2 id="ref2-title">In 2 Minuten weitergeben</h2>
        <p class="context-line">FÃ¼r Freunde, Familie, Kollegen. <strong>anonym</strong>, mit <strong>Klarheit</strong>, <strong>kein Verkauf</strong>.</p>

        <fieldset class="ref2-group" aria-labelledby="ref2-ziel-label">
          <legend id="ref2-ziel-label">Zielgruppe wÃ¤hlen</legend>
          <div class="btn-row">
            <button type="button" class="btn tap-scale ref2-seg" data-seg="freund" aria-pressed="false">Freund</button>
            <button type="button" class="btn tap-scale ref2-seg" data-seg="familie" aria-pressed="false">Familie</button>
            <button type="button" class="btn tap-scale ref2-seg" data-seg="kollege" aria-pressed="false">Kollege</button>
            <button type="button" class="btn tap-scale ref2-seg" data-seg="selbststaendig" aria-pressed="false">SelbststÃ¤ndig</button>
          </div>
        </fieldset>

        <fieldset class="ref2-group" aria-labelledby="ref2-tone-label">
          <legend id="ref2-tone-label">TonalitÃ¤t wÃ¤hlen</legend>
          <div class="btn-row">
            <button type="button" class="btn tap-scale ref2-tone" data-tone="locker" aria-pressed="true">locker</button>
            <button type="button" class="btn tap-scale ref2-tone" data-tone="kurz" aria-pressed="false">kurz</button>
            <button type="button" class="btn tap-scale ref2-tone" data-tone="ergebnisorientiert" aria-pressed="false">ergebnisorientiert</button>
            <button type="button" class="btn tap-scale ref2-tone" data-tone="familie" aria-pressed="false">familie</button>
            <button type="button" class="btn tap-scale ref2-tone" data-tone="selbststÃ¤ndig" aria-pressed="false">selbststÃ¤ndig</button>
          </div>
        </fieldset>

        <div class="ref2-field">
          <label for="ref2-name">Optionaler Name</label>
          <input id="ref2-name" name="ref2-name" inputmode="text" autocomplete="given-name" placeholder="Vorname fÃ¼r persÃ¶nlichen Touch">
          <p class="hint">Optional. ErhÃ¶ht NÃ¤he. Alles bleibt <strong>anonym</strong>.</p>
        </div>

        <div class="wa-preview" role="region" aria-labelledby="wa-prev-title">
          <h3 id="wa-prev-title">WhatsApp Preview</h3>
          <div class="wa-bubble">
            <div class="wa-meta">
              <span class="wa-name">Kontakt</span>
              <span class="wa-time" aria-live="polite">jetzt</span>
            </div>
            <div class="wa-msg">
              <p id="ref2-message">Hey ğŸ‘‹ ich hab grad den Finanz-Check von Heiko gemacht. Ging super fix und war richtig hilfreich. Schau mal rein â€“ sind nur 2 Minuten: {{URL}}</p>
            </div>
            <div class="wa-typing" aria-hidden="true">
              <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            </div>
          </div>

          <div class="actions">
            <button class="btn btn-secondary" id="ref2-copy">ğŸ“‹ Text kopieren</button>
            <button class="btn btn-primary tap-scale" id="ref2-share">ğŸ’¬ WhatsApp teilen</button>
          </div>

          <p class="privacy-note">Zero-pressure: <strong>anonym</strong>, <strong>kein Verkauf</strong>, <strong>2 Minuten</strong>. <strong>Vorteil</strong> fÃ¼r beide: mehr <strong>Klarheit</strong>.</p>
        </div>
      </div>
    </section>

    <!-- TEMPLATES -->
    <script type="application/json" id="ref2-templates">
    {
      "Locker": "â€Hey ğŸ‘‹ ich hab grad den Finanz-Check von Heiko gemacht. Ging super fix und war richtig hilfreich. Schau mal rein â€“ sind nur 2 Minuten: {{URL}}â€œ",
      "Kurz": "â€Kurzer Tipp: 2-Minuten-Finanz-Ampel ğŸ‘‰ {{URL}}â€œ",
      "Ergebnisorientiert": "â€Ich war echt Ã¼berrascht, wie viel Klarheit man in 2 Minuten bekommt ğŸ˜… anonym & ohne Verkauf: {{URL}}â€œ",
      "Familie": "â€Hab direkt an euch gedacht: kurze Eltern-Ampel, zeigt in 2 Min, ob was Wichtiges fehlt ğŸ‘‰ {{URL}}â€œ",
      "SelbststÃ¤ndig": "â€FÃ¼r SelbststÃ¤ndige wie dich: 2-Minuten-Check, ob alles passt â€“ anonym & klar ğŸ‘‰ {{URL}}â€œ"
    }
    </script>

    <!-- NEURO-UX ELEMENTS -->
    <section class="section neuro" aria-labelledby="neuro-title">
      <div class="wrap">
        <h2 id="neuro-title">Sicher weitergeben â€“ ruhig & ohne Druck</h2>

        <div class="proof">
          <div class="proof-item">
            <div class="proof-top"><span>Vertrauen</span><strong>98 %</strong></div>
            <div class="proof-bar" data-value="98"><span></span></div>
          </div>
          <div class="proof-item">
            <div class="proof-top"><span>Klarheit</span><strong>92 %</strong></div>
            <div class="proof-bar" data-value="92"><span></span></div>
          </div>
          <div class="proof-item">
            <div class="proof-top"><span>Empfehlung</span><strong>91 %</strong></div>
            <div class="proof-bar" data-value="91"><span></span></div>
          </div>
        </div>

        <div class="live-feed" aria-live="polite" aria-atomic="true">
          <ul id="live-messages">
            <li>â€Sandra (31) hat gerade ihre Ampel gemacht.â€œ</li>
            <li>â€Leon (27) spart 420 â‚¬ im Jahr.â€œ</li>
            <li>â€Heute schon 18 Menschen Klarheit gewonnen.â€œ</li>
          </ul>
        </div>

        <div class="micro-t">
          <figure class="micro">
            <blockquote>â€HÃ¤tte nie gedacht, dass 2 Minuten so viel Ruhe bringen.â€œ</blockquote>
            <figcaption>â€“ Lisa, 29</figcaption>
          </figure>
          <figure class="micro">
            <blockquote>â€Endlich Ruhe im Kopf â€“ wir wissen, was heute wichtig ist.â€œ</blockquote>
            <figcaption>â€“ Jan, 37</figcaption>
          </figure>
          <figure class="micro">
            <blockquote>â€Wir sparen 420 â‚¬ im Jahr und fÃ¼hlen uns sicherer.â€œ</blockquote>
            <figcaption>â€“ Miriam &amp; Paul</figcaption>
          </figure>
        </div>

        <article class="storyblock">
          <h3>Warum deine Empfehlung wichtig ist</h3>
          <p>Viele schieben das Thema. Alltag. Mental Load. Unsicherheit. Mit deinem Link bekommen sie in <strong>2 Minuten</strong> ein ruhiges Bild.</p>
          <ul class="bullets">
            <li><strong>anonym</strong> â€“ niemand muss etwas preisgeben</li>
            <li><strong>Klarheit</strong> â€“ Ampel zeigt Rot Â· Gelb Â· GrÃ¼n</li>
            <li><strong>kein Verkauf</strong> â€“ zero-pressure, nur ein Blick</li>
            <li><strong>Vorteil</strong> â€“ schneller Start, mehr Ruhe</li>
          </ul>
          <p>Du hilfst, ohne zu diskutieren. Die Ampel erklÃ¤rt sich selbst. Das ist ruhig, einfach, erwachsen.</p>
        </article>
      </div>
    </section>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav" aria-label="Untere Navigation">
      <a href="/" class="nav-item" aria-label="Home">ğŸ  <span>Home</span></a>
      <a href="/#quiz" class="nav-item" aria-label="Finanzcheck">ğŸš¦ <span>Finanzcheck</span></a>
      <a href="#referral-engine" class="nav-item" aria-label="Weitergeben">ğŸ’¬ <span>Weitergeben</span></a>
      <a href="#contact" class="nav-item" aria-label="Kontakt">ğŸ“ <span>Kontakt</span></a>
    </nav>

    <!-- CONTACT -->
    <section id="contact" class="contact">
      <div class="wrap">
        <h2>Kontakt â€“ kurz & ruhig</h2>
        <p>Wenn Fragen sind: kurzer Austausch. <strong>kein Verkauf</strong>.</p>
        <ul class="contact-list">
          <li><a href="mailto:hi@example.com">hi@example.com</a></li>
          <li><a href="tel:+490000000000">+49 000 0000000</a></li>
        </ul>
        <p class="legal">Â© <span data-year></span> Ruhige Finanz-Ampel Â· Impressum Â· Datenschutz</p>
      </div>
    </section>
  </main>

  <script defer src="assets/app.js"></script>
</body>
</html>

<!-- =======================================================================
/assets/styles.css
======================================================================= */
/* =============================================================================
styles.css â€” Production-grade Calm-UX design system (2026)
Vanilla CSS Â· Mobile-first Â· A11y-first Â· Motion-safe
Order: Tokens â†’ Base â†’ Layout/Type â†’ Components â†’ Motion â†’ Utilities
============================================================================= */

/* ============================== DESIGN TOKENS ============================== */
:root{
  /* Core palette (requested names) */
  --color-bg:#05070E;
  --color-surface:rgba(255,255,255,.06);
  --color-primary:#C8A44B;
  --color-accent:#90C2FF;
  --color-success:#55b76b;
  --color-warning:#d6c45a;
  --color-text:#F7F8FC;

  /* Radii */
  --radius-s:10px;
  --radius-m:16px;
  --radius-l:24px;

  /* Shadows */
  --shadow-soft:0 10px 24px rgba(0,0,0,.28);
  --shadow-medium:0 30px 80px rgba(0,0,0,.55);

  /* Spacing scale */
  --spacing-xs:.5rem;
  --spacing-s:.75rem;
  --spacing-m:1rem;
  --spacing-l:1.5rem;
  --spacing-xl:2.5rem;

  /* Font sizes */
  --font-size-xs:.9rem;
  --font-size-s:1rem;
  --font-size-m:clamp(1rem,1.1vw,1.08rem);
  --font-size-l:clamp(1.06rem,1.8vw,1.28rem);
  --font-size-xl:clamp(1.6rem,2.6vw,2.3rem);
  --font-size-xxl:clamp(2rem,3.6vw,3.2rem);

  /* Motion */
  --ease-smooth:cubic-bezier(.22,.61,.36,1);
  --dur-1:.18s;
  --dur-2:.28s;
  --dur-3:.5s;

  /* Layout helpers */
  --container:1120px;
  --gutter:clamp(16px,5vw,32px);
  --section-y:clamp(40px,7vw,84px);
  --safe-bottom:env(safe-area-inset-bottom,0px);

  /* Subtle surfaces & borders (dark theme support) */
  --surface-0:rgba(255,255,255,.03);
  --surface-1:rgba(255,255,255,.06);
  --surface-2:rgba(255,255,255,.08);
  --border-1:rgba(255,255,255,.12);
  --border-2:rgba(255,255,255,.18);

  /* Result states */
  --res-red-bg:#2b1517; --res-red-bd:#e17676;
  --res-yellow-bg:#2b2b14; --res-yellow-bd:#e3d26a;
  --res-green-bg:#102115; --res-green-bd:#66c87b;

  /* Background glows */
  --bg-glow-1:radial-gradient(1000px 600px at 15% -10%,rgba(200,164,75,.22),transparent 55%);
  --bg-glow-2:radial-gradient(900px 600px at 85% 10%,rgba(120,150,255,.18),transparent 60%);

  color-scheme: dark;
}
@media (prefers-contrast:more){
  :root{ --surface-1:rgba(255,255,255,.08); --surface-2:rgba(255,255,255,.12); }
}

/* ================================ BASE RESET =============================== */
*,
*::before,
*::after{ box-sizing:border-box; }
html{ -webkit-text-size-adjust:100%; text-size-adjust:100%; scroll-behavior:smooth; }
html,body{ margin:0; height:auto; overflow-x:hidden; }
body{
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",system-ui,sans-serif;
  background:var(--bg-glow-1),var(--bg-glow-2),linear-gradient(180deg,#04050A,#02040A 60%);
  color:var(--color-text);
  -webkit-font-smoothing:antialiased;
  line-height:1.45;
  hyphens:auto;
}
img,picture,svg,video{ display:block; max-width:100%; height:auto; }
a{ color:inherit; text-decoration:none; }
a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible{
  outline:3px solid var(--color-accent);
  outline-offset:3px;
  border-radius:10px;
}
::selection{ background:rgba(233,211,148,.25); }

/* Motion safety */
@media (prefers-reduced-motion:reduce){
  *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
}

/* ============================ LAYOUT & TYPOGRAPHY ========================== */
.section{ padding:var(--section-y) 0; }
.wrap,.container{ max-width:var(--container); margin-inline:auto; padding-inline:var(--gutter); }
.grid{ display:grid; gap:clamp(.6rem,2.2vw,1.2rem); }
.stack{ display:flex; flex-direction:column; gap:clamp(.55rem,1.8vw,1rem); }

h1,h2,h3{ margin:0 0 .9rem; font-weight:800; letter-spacing:-.01em; }
h1{ font-size:var(--font-size-xxl); line-height:1.12; }
h2{ font-size:var(--font-size-xl); }
h3{ font-size:var(--font-size-l); }
p,li{ font-size:var(--font-size-m); color:#A8B1C5; margin:0 0 .6rem; }
.hero-micro{ font-size:clamp(.95rem,1.1vw,1rem); color:#8F97AA; }

/* Hero layout */
.hero{ padding-top:clamp(28px,4vw,64px); padding-bottom:clamp(16px,2.5vw,28px); }
.hero-wrap{ display:grid; gap:clamp(1.2rem,3vw,2.4rem); }
@media (min-width:1000px){
  .hero-wrap{ grid-template-columns:1.2fr .8fr; align-items:center; }
}
.hero-benefits{ display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.6rem; }
.chip{
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.35rem .65rem; border-radius:999px;
  background:var(--surface-1); border:1px solid var(--border-1);
  color:#D4DBEE; font-size:.92rem;
}

/* Calm whitespace on large screens */
@media (min-width:1200px){
  .section{ padding:calc(var(--section-y) * 1.15) 0; }
  .wrap{ padding-inline:calc(var(--gutter) + 6px); }
}

/* ================================ FORMS =================================== */
input,textarea{
  width:100%;
  background:var(--surface-1);
  border:1px solid var(--border-2);
  color:var(--color-text);
  padding:.85rem 1rem;
  border-radius:var(--radius-m);
  font:inherit;
}
input::placeholder,textarea::placeholder{ color:#DDE3F4; opacity:.85; }
label{ color:#DDE3F4; font-size:.92rem; }

/* =============================== COMPONENTS =============================== */
/* Buttons */
.btn{
  position:relative;
  display:inline-flex; align-items:center; justify-content:center;
  min-height:48px; padding:.95rem 1.5rem;
  border-radius:999px; border:1px solid transparent;
  background:var(--surface-1); color:var(--color-text);
  font-weight:800; cursor:pointer; white-space:normal;
  transition:transform var(--dur-1) var(--ease-smooth), box-shadow var(--dur-1) var(--ease-smooth), filter var(--dur-1) var(--ease-smooth);
  -webkit-tap-highlight-color:transparent;
}
.btn:hover{ transform:translateY(-1px); }
.btn:active{ transform:translateY(0) scale(.985); }
.btn.small{ min-height:44px; padding:.6rem 1rem; font-weight:700; }

.btn-primary{
  background:linear-gradient(135deg,var(--color-primary),#E9D394);
  color:#111;
  box-shadow:0 12px 28px rgba(200,164,75,.35);
}
.btn-primary:hover{ box-shadow:0 18px 40px rgba(200,164,75,.4); filter:brightness(1.06); }

.btn-secondary{
  background:var(--surface-1);
  color:var(--color-text);
  border:1px solid var(--border-2);
  box-shadow:var(--shadow-soft);
}
@media (max-width:767px){
  .btn,.btn-primary,.btn-secondary{ width:100%; }
}

/* Tap-scale */
.tap-scale{ transition:transform var(--dur-1) var(--ease-smooth); }
.tap-scale:active{ transform:scale(.98); }

/* Cards & Surfaces */
.card{
  background:var(--surface-2);
  border:1px solid var(--border-2);
  border-radius:var(--radius-m);
  padding:1rem 1.1rem;
  box-shadow:var(--shadow-soft);
}
.surface{
  background:var(--surface-1);
  border:1px solid var(--border-1);
  border-radius:var(--radius-l);
  padding:var(--spacing-l);
  box-shadow:var(--shadow-soft);
}

/* Persona cards */
.persona-grid{ display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
.persona-card{
  background:var(--surface-1);
  border:1px solid var(--border-2);
  border-radius:18px;
  padding:1rem 1.1rem;
  box-shadow:var(--shadow-soft);
  transition:transform var(--dur-2) var(--ease-smooth), box-shadow var(--dur-2) var(--ease-smooth), border-color var(--dur-2) var(--ease-smooth);
}
.persona-card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-medium); border-color:rgba(233,211,148,.35); }
.persona-card h3{ color:#E7ECFA; }
.persona-points{ margin:.4rem 0 0; padding-left:1.05rem; }

/* Ampel lights */
.ampel{ display:flex; align-items:center; gap:.6rem; margin:.6rem 0 .2rem; }
.ampel-light{
  width:18px; height:18px; border-radius:50%;
  border:1px solid rgba(255,255,255,.25);
  box-shadow:0 0 0 4px rgba(255,255,255,.06) inset, 0 0 16px rgba(0,0,0,.35);
  display:inline-block;
}
.ampel-red{ background:#ff4b4b; }
.ampel-yellow{ background:#ffd44d; }
.ampel-green{ background:#2fe87d; }
@keyframes ampelGlow{
  0%,100%{ filter:brightness(1); box-shadow:0 0 0 4px rgba(255,255,255,.06) inset, 0 0 12px rgba(255,255,255,.08); }
  50%{ filter:brightness(1.18); box-shadow:0 0 0 4px rgba(255,255,255,.06) inset, 0 0 28px rgba(255,255,255,.22);}
}
.ampel .ampel-light{ animation:ampelGlow 2.2s var(--ease-smooth) infinite; }
.ampel .ampel-light:nth-child(2){ animation-delay:.4s; }
.ampel .ampel-light:nth-child(3){ animation-delay:.8s; }

/* Quiz pills */
.answers{ display:grid; gap:.6rem; margin-top:.6rem; }
.quiz-pill,
.answers .btn{
  border-radius:999px;
  border:1px solid var(--border-2);
  background:var(--surface-1);
  padding:.85rem 1.1rem;
  font-weight:700;
}
.quiz-tag{ margin:.4rem 0 .8rem; color:#9EA7BE; }
.progress{ position:relative; margin:.8rem 0 1rem; height:10px; }
.progress-track{ position:absolute; inset:0; background:var(--surface-1); border:1px solid var(--border-2); border-radius:999px; }
.progress-bar{ position:absolute; inset:0 auto 0 0; width:0; background:linear-gradient(90deg,var(--color-primary),#E9D394); border-radius:999px; transition:width .35s var(--ease-smooth); }
.progress-text{ margin-top:.45rem; font-size:.92rem; color:#D1D8EB; }

/* Proof bars */
.proof{ display:grid; gap:.75rem; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); margin:1rem 0; }
.proof-item{ background:var(--surface-1); border:1px solid var(--border-2); border-radius:14px; padding:.75rem .9rem; box-shadow:var(--shadow-soft); }
.proof-top{ display:flex; align-items:center; justify-content:space-between; color:#E6ECFC; font-weight:700; margin-bottom:.5rem; }
.proof-bar{ position:relative; height:8px; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden; border:1px solid var(--border-1); }
.proof-bar>span{ display:block; height:100%; width:0; background:linear-gradient(90deg,var(--color-primary),#E9D394); transition:width .6s var(--ease-smooth); }

/* WhatsApp bubble (preview) */
.wa-preview{ margin-top:var(--spacing-l); }
.wa-bubble{
  background:linear-gradient(180deg,#0d141c,#0b1119);
  border:1px solid #1f2a37;
  border-radius:18px;
  padding:12px 12px 10px;
  box-shadow:0 14px 34px rgba(0,0,0,.38);
  max-width:560px;
}
.wa-meta{ display:flex; justify-content:space-between; font-size:.9rem; color:#9fb1c9; margin-bottom:.35rem; }
.wa-msg{ background:#1b2a3a; color:#e6f1ff; border:1px solid #2a3b4f; border-radius:14px; padding:.75rem .85rem; }
.wa-typing{ display:flex; align-items:center; gap:.3rem; padding:.45rem 0 .1rem; }
.wa-typing .dot{ width:6px; height:6px; border-radius:50%; background:#8fb4ff; opacity:.7; animation:waDots 1.2s ease-in-out infinite; }
.wa-typing .dot:nth-child(2){ animation-delay:.15s; }
.wa-typing .dot:nth-child(3){ animation-delay:.3s; }
@keyframes waDots{ 0%,100%{ transform:translateY(0); opacity:.6; } 50%{ transform:translateY(-3px); opacity:1; } }
.actions{ display:flex; gap:.6rem; margin-top:.7rem; }
.privacy-note{ margin-top:.5rem; font-size:.94rem; color:#9eadc8; }

/* Testimonials */
.micro-t{ display:grid; gap:.8rem; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); margin:1rem 0; }
.micro{
  background:var(--surface-1);
  border:1px solid var(--border-2);
  border-radius:16px;
  padding:.8rem .95rem;
  color:#E8EEFF;
  box-shadow:var(--shadow-soft);
}
.micro blockquote{ margin:0; color:#E8EEFF; }
.micro figcaption{ margin-top:.4rem; color:#AFC0DA; font-size:.92rem; }

/* Live social proof feed */
.live-feed{ background:var(--surface-0); border:1px solid var(--border-1); border-radius:16px; padding:.7rem .9rem; }
#live-messages{ list-style:none; padding:0; margin:0; display:grid; gap:.35rem; }
#live-messages li{ font-size:.98rem; color:#CFD7EC; }

/* Sticky CTA */
.sticky-cta{
  position:fixed; left:0; right:0; bottom:14px; z-index:68;
  display:none; justify-content:center;
  transform:translateY(100%); opacity:0;
  transition:transform var(--dur-2) var(--ease-smooth), opacity var(--dur-2) var(--ease-smooth);
  padding-bottom:calc(var(--safe-bottom) + 6px);
}
.sticky-cta .inner{
  background:rgba(5,8,22,.92);
  border:1px solid rgba(233,211,148,.28);
  padding:.55rem;
  border-radius:999px;
  box-shadow:var(--shadow-medium);
}
@media (max-width:1023px){ .sticky-cta{ display:flex; } }
.sticky-cta.show{ transform:translateY(0); opacity:1; }

/* Decision anchor */
.decision-anchor{
  position:sticky; top:-1px; z-index:60;
  display:none; justify-content:center; align-items:center;
  height:42px; background:rgba(10,14,22,.9);
  color:#EDEFF7; border-bottom:1px solid var(--border-2);
  box-shadow:0 6px 24px rgba(0,0,0,.28);
}
.decision-anchor.show{ display:flex; }

/* Bottom navigation */
.bottom-nav{
  position:sticky; bottom:0; z-index:66;
  display:grid; grid-template-columns:repeat(4,1fr);
  background:rgba(8,12,18,.9);
  border-top:1px solid var(--border-2);
  backdrop-filter:saturate(140%) blur(8px);
}
.bottom-nav .nav-item{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:.7rem .5rem .65rem;
  color:#D5DCF0; font-size:.9rem; gap:.25rem;
}
.bottom-nav .nav-item span{ font-size:.8rem; color:#9FB0CC; }

/* Critical highlight */
.critical-highlight,
.auto-key{
  background:linear-gradient(180deg,transparent 60%, rgba(233,211,148,.28) 60%);
  border-radius:6px;
  padding:0 .1rem;
}

/* Result cards (index) */
.result-card{ border-radius:18px; padding:1.1rem 1.2rem; margin-top:1rem; box-shadow:0 18px 40px rgba(0,0,0,.35); }
.result-red{ background:var(--res-red-bg); border:1px solid var(--res-red-bd); }
.result-yellow{ background:var(--res-yellow-bg); border:1px solid var(--res-yellow-bd); }
.result-green{ background:var(--res-green-bg); border:1px solid var(--res-green-bd); }

/* ================================ MOTION ================================== */
/* Fade up */
.fade-up{ opacity:0; transform:translateY(18px); }
.fade-up.visible{ opacity:1; transform:none; transition:opacity var(--dur-3) var(--ease-smooth), transform var(--dur-3) var(--ease-smooth); }

/* Fade slide */
.fade-slide{ opacity:0; transform:translate3d(0,10px,0); }
.fade-slide.visible{ opacity:1; transform:none; transition:opacity var(--dur-3) var(--ease-smooth), transform var(--dur-3) var(--ease-smooth); }

/* Pop-in */
.pop-in{ opacity:0; transform:scale(.98); }
.pop-in.visible{ opacity:1; transform:scale(1); transition:opacity var(--dur-2) var(--ease-smooth), transform var(--dur-2) var(--ease-smooth); }

/* Subtle pulse */
.subtle-pulse{ animation:subtlePulse 1.8s var(--ease-smooth) infinite; }
@keyframes subtlePulse{ 0%,100%{ transform:scale(1); } 50%{ transform:scale(1.02); } }

/* ================================ UTILITIES ================================ */
.visually-hidden{
  position:absolute!important; width:1px; height:1px; margin:-1px; padding:0; overflow:hidden;
  clip:rect(0 0 0 0); clip-path:inset(50%); border:0; white-space:nowrap;
}

/* Helpers */
.story-card{ background:var(--surface-1); border:1px solid var(--border-2); border-radius:16px; padding:.95rem 1.05rem; }
.safety-card{ border-left:4px solid var(--color-primary); }
.story-grid{ display:grid; gap:1rem; margin:1.1rem 0; grid-template-columns:repeat(auto-fit,minmax(min(100%,260px),1fr)); }

/* Header shell */
.site-header{ position:sticky; top:0; z-index:70; background:rgba(5,8,22,.92); border-bottom:1px solid var(--border-1); box-shadow:0 6px 24px rgba(0,0,0,.28); }
.header-bar{ display:flex; align-items:center; justify-content:space-between; min-height:60px; padding:.85rem 0; }
.brand{ display:flex; flex-direction:column; gap:.18rem; }
.brand-dot{
  width:.9rem; height:.9rem; border-radius:50%;
  background:conic-gradient(from 210deg,var(--color-primary),#E9D394,var(--color-primary));
  box-shadow:0 0 0 5px rgba(200,164,75,.25),0 0 26px rgba(200,164,75,.65);
}
.brand-name{ font-weight:700; }
.brand-tag{ font-size:.72rem; letter-spacing:.18em; color:#8F97AA; text-transform:uppercase; }

/* END styles.css */

<!-- =======================================================================
/assets/app.js
======================================================================= -->
/* ==========================================================================
app.js â€” Production-grade Calm-UX engine (2026)
Vanilla JS â€¢ defer-loaded â€¢ modular â€¢ single namespace window.app
Implements: decision anchor, auto-highlight, motion, ampel, personas,
live feed, proof bars, quiz wizard (summary + slots), referral engine,
bottom nav, sticky CTA.
========================================================================== */
(() => {
  'use strict';

  /* ---------------------------- Core helpers ---------------------------- */
  const $ = (s, r = document) => r.querySelector(s);
  const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));
  const on = (el, t, fn, o) => el?.addEventListener?.(t, fn, o);
  const MM = (q) => { try { return matchMedia(q); } catch { return { matches:false, addEventListener(){} }; } };
  const prefersReduced = MM('(prefers-reduced-motion: reduce)').matches;

  const store = (() => {
    try { const k='__probe'; localStorage.setItem(k,'1'); localStorage.removeItem(k);
      return {
        get:(k,d=null)=>{ try{ const v=localStorage.getItem(k); return v==null?d:JSON.parse(v); }catch{ return d; } },
        set:(k,v)=>{ try{ localStorage.setItem(k, JSON.stringify(v)); }catch{} },
        getRaw:(k,d=null)=>{ try{ const v=localStorage.getItem(k); return v==null?d:v; }catch{ return d; } },
        setRaw:(k,v)=>{ try{ localStorage.setItem(k, String(v)); }catch{} },
      };
    } catch {
      const m=new Map();
      return {
        get:(k,d=null)=> m.has(k)?m.get(k):d,
        set:(k,v)=> void m.set(k,v),
        getRaw:(k,d=null)=> m.has(k)?m.get(k):d,
        setRaw:(k,v)=> void m.set(k,v),
      };
    }
  })();

  const observeOnce = (targets, options, onEnter) => {
    const els = Array.isArray(targets) ? targets : $$(targets);
    if (!('IntersectionObserver' in window) || !els.length) {
      els.forEach((el) => onEnter?.(el, true));
      return null;
    }
    const io = new IntersectionObserver((entries) => {
      entries.forEach((e) => {
        if (e.isIntersecting) { onEnter?.(e.target, true, e); io.unobserve(e.target); }
      });
    }, options || { threshold:.12, rootMargin:'0px 0px -10% 0px' });
    els.forEach((el) => io.observe(el));
    return io;
  };

  const toast = (msg) => {
    const t = document.createElement('div');
    t.className='whisper';
    t.role='status';
    t.setAttribute('aria-live','polite');
    t.textContent=msg;
    t.style.cssText='position:fixed;left:18px;bottom:18px;z-index:70;background:rgba(11,15,22,.92);border:1px solid rgba(255,255,255,.14);color:#F6F7FB;border-radius:14px;padding:.6rem .8rem;box-shadow:0 12px 28px rgba(0,0,0,.38);opacity:0;transform:translateY(10px);transition:opacity .25s cubic-bezier(.22,.61,.36,1), transform .25s cubic-bezier(.22,.61,.36,1)';
    document.body.appendChild(t);
    requestAnimationFrame(()=>{ t.style.opacity='1'; t.style.transform='translateY(0)'; });
    setTimeout(()=> t.remove(), 2000);
  };

  /* ------------------------------- Modules ------------------------------- */
  function initDecisionAnchor() {
    const bar = $('#decision-anchor'); if (!bar) return;
    const onScroll = () => { bar.classList.toggle('show', window.scrollY > 180); };
    on(window, 'scroll', onScroll, { passive:true }); onScroll();
  }

  function initAutoHighlightCriticalText() {
    const KEYWORDS = ['2 Minuten','anonym','Klarheit','Vorteil','kein Verkauf','Ruhe','25 â‚¬'];
    const skip = new Set(['SCRIPT','STYLE','NOSCRIPT','CODE','PRE','TEXTAREA']);
    const root = document.body; if (!root) return;
    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node) {
        const p = node.parentElement;
        if (!p || skip.has(p.tagName) || p.closest('.critical-highlight')) return NodeFilter.FILTER_REJECT;
        const t = node.nodeValue; return (t && /[A-Za-zÃ„Ã–ÃœÃ¤Ã¶Ã¼0-9]/.test(t)) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
      }
    });
    const re = new RegExp(`\\b(${KEYWORDS.map(k=>k.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&')).join('|')})\\b`,'gi');
    const nodes=[]; while (walker.nextNode()) nodes.push(walker.currentNode);
    nodes.forEach(node => {
      const txt=node.nodeValue; if (!re.test(txt)) return;
      const span=document.createElement('span');
      span.innerHTML = txt.replace(re, (m)=>`<span class="critical-highlight">${m}</span>`);
      node.parentNode.replaceChild(span, node);
    });
  }

  function initFadeUp() {
    if (prefersReduced) { $$('.fade-up,.fade-slide,.pop-in').forEach(el=>el.classList.add('visible')); return; }
    observeOnce('.fade-up,.fade-slide,.pop-in', { threshold:.12, rootMargin:'0px 0px -10% 0px' }, (el)=> el.classList.add('visible'));
  }

  function initHeroAmpelAnimation() {
    const ampel = $('.ampel'); if (!ampel) return;
    const lights = $$('.ampel-light', ampel); if (lights.length !== 3) return;
    lights.forEach(l => { l.style.opacity='0.25'; l.style.transition='opacity .5s var(--ease-smooth)'; });
    observeOnce([ampel], { threshold:.6 }, () => {
      const [red,yellow,green]=lights;
      setTimeout(()=> red.style.opacity='1', 50);
      setTimeout(()=> yellow.style.opacity='1', 700);
      setTimeout(()=> green.style.opacity='1', 1400);
      setTimeout(()=> lights.forEach(l=> l.style.opacity=''), 2400);
    });
  }

  function initPersonaSelection() {
    const cards = $$('.persona-card'); if (!cards.length) return;
    const setActive = (el) => {
      cards.forEach(c=> c.classList.toggle('is-active', c===el));
      const feed = $('#live-messages');
      if (feed && feed.firstElementChild) feed.firstElementChild.textContent = 'â€Gerade empfohlen â€“ in 2 Minuten mehr Klarheit.â€œ';
    };
    cards.forEach(c => on(c,'click', ()=> setActive(c)));
    cards.forEach(c => on(c,'keydown', e=>{ if (e.key==='Enter' || e.key===' ') { e.preventDefault(); setActive(c); } }));
  }

  function initLiveFeed() {
    const ul = $('#live-messages'); if (!ul) return;
    const items = () => $$('#live-messages li');
    if (items().length < 2) return;
    setInterval(()=>{
      const first = items()[0]; if (!first) return;
      first.style.opacity='0'; first.style.transition='opacity .35s var(--ease-smooth)';
      setTimeout(()=>{ ul.appendChild(first); first.style.opacity=''; }, 380);
    }, 5000);
  }

  function initProofBars() {
    $$('.proof-bar').forEach(bar => {
      const span = $('span', bar) || document.createElement('span');
      if (!span.parentNode) bar.appendChild(span);
      const v = Math.max(0, Math.min(100, Number(bar.getAttribute('data-value')||'0')));
      observeOnce([bar], { threshold:.35 }, ()=> { span.style.width = v + '%'; });
    });
  }

  // Quiz
  function initQuizWizard() {
    const quiz = $('#quiz'); if (!quiz) return;
    const steps = $$('.quiz-step', quiz);
    const progress = $('[data-progress]', quiz);
    const stepText = $('[data-step]', quiz);
    const result = $('#quiz-result', quiz);
    const resultTitle = $('#quiz-result-title', quiz);
    const resultText = $('#quiz-result-text', quiz);
    const slotsWrap = $('#quiz-slots', quiz);
    if (!steps.length || !progress || !result) return;

    let current = 0;
    const answers = [];

    const goto = (i) => {
      steps.forEach((s, idx)=> s.hidden = idx !== i);
      current = i;
      const pct = Math.round((i/steps.length)*100);
      progress.style.width = pct + '%';
      if (stepText) stepText.textContent = String(Math.min(i+1, steps.length));
    };

    const interpret = () => {
      const colors = answers.map(v => v==='rot'?'rot':v==='gelb'?'gelb':'gruen');
      const score = colors.reduce((acc,c)=> acc + (c==='rot'?0 : c==='gelb'?1 : 2), 0);
      const max = colors.length * 2;
      const pct = Math.round((score / (max||1)) * 100);
      let state = 'gruen';
      if (colors.includes('rot')) state = 'rot';
      else if (colors.includes('gelb')) state = 'gelb';
      return { state, pct, colors };
    };

    const showResult = () => {
      const { state, pct } = interpret();
      result.hidden = false;
      resultTitle.textContent = (state==='rot') ? 'ğŸ”´ Heute wichtig'
                           : (state==='gelb') ? 'ğŸŸ¡ Bald wichtig'
                           : 'ğŸŸ¢ Passt â€“ gelassen bleiben';
      resultText.textContent = generateSummary(answers, pct, state);
      const slots = generateTimeSlots(5);
      if (slotsWrap) {
        slotsWrap.innerHTML = '';
        slots.forEach(s => {
          const div = document.createElement('div');
          div.className = 'slot';
          if (s.type==='today') div.classList.add('slot-today');
          if (s.type==='tomorrow') div.classList.add('slot-tomorrow');
          div.textContent = s.label;
          slotsWrap.appendChild(div);
        });
      }
      result.scrollIntoView({ behavior:'smooth', block:'start' });
    };

    steps.forEach((s, idx) => {
      $$('.answer', s).forEach(btn => {
        on(btn, 'click', () => {
          const val = btn.getAttribute('data-value') || 'gruen';
          answers[idx] = val;
          if (idx < steps.length - 1) goto(idx+1);
          else { steps.forEach(x=> x.hidden = true); showResult(); }
        });
      });
    });

    result.hidden = true;
    goto(0);
  }

  function generateSummary(answers, pct, state) {
    const mapWord = { rot:'Keine Ahnung', gelb:'Unsicher', gruen:'Passt' };
    const readable = answers.map(a => mapWord[a] || '').filter(Boolean);
    const head = (state==='rot') ? 'Heute wichtig â€“ ruhig draufschauen.'
              : (state==='gelb') ? 'Bald wichtig â€“ einplanen.'
              : 'Passt â€“ Fokus auf Ruhe.';
    return `${head} EinschÃ¤tzung: ${readable.join(' Â· ')}. GefÃ¼hl: ${pct}% sicher.`;
  }

  function generateTimeSlots(n = 5) {
    const out = [];
    const now = new Date();
    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'Europe/Berlin';
    const make = (d, h, m, type) => {
      const dt = new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m, 0);
      const label = new Intl.DateTimeFormat('de-DE', { weekday:'short', hour:'2-digit', minute:'2-digit', timeZone: tz }).format(dt);
      out.push({ date: dt, label, type });
    };
    const addDaySlots = (dayDate, type) => { for (let hour = 9; hour <= 18 && out.length < n; hour += 1) make(dayDate, hour, 0, type); };
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);
    addDaySlots(today, 'today'); addDaySlots(tomorrow, 'tomorrow');
    const filtered = out.filter(s => s.type==='tomorrow' || s.date.getTime() > now.getTime());
    return filtered.slice(0, n);
  }

  // Referral Engine (weitergeben.html)
  function initReferralEngine() {
    const tplEl = $('#ref2-templates');
    const msgEl = $('#ref2-message');
    const nameEl = $('#ref2-name');
    const copyBtn = $('#ref2-copy');
    const shareBtn = $('#ref2-share');
    const toneBtns = $$('.ref2-tone');
    const segBtns  = $$('.ref2-seg');
    if (!tplEl || !msgEl) return;

    let templates = {};
    try { templates = JSON.parse(tplEl.textContent || '{}'); } catch { templates = {}; }

    const KEY_REFID='hh.ref2.id';
    const randomId = (len=10) => {
      const A='abcdefghijklmnopqrstuvwxyz0123456789';
      try { const u=new Uint8Array(len); crypto.getRandomValues(u); return Array.from(u,x=>A[x%A.length]).join(''); }
      catch { let s=''; for(let i=0;i<len;i++) s+=A[(Math.random()*A.length)|0]; return s; }
    };
    const getId = () => store.getRaw(KEY_REFID) || (store.setRaw(KEY_REFID, randomId()), store.getRaw(KEY_REFID));
    const sanitize = (v) => (v ? v.replace(/[^a-z0-9]/gi,'').toLowerCase() : '');

    const buildURL = () => {
      const u = new URL(location.origin || 'https://example.com');
      u.searchParams.set('utm_source','weitergeben');
      u.searchParams.set('utm_medium','share');
      u.searchParams.set('utm_campaign','check');
      const rid = getId(); u.searchParams.set('rid', rid);
      const alias = sanitize((nameEl?.value||'').trim());
      if (alias) u.searchParams.set('ref', `${alias}.${String(rid).slice(0,5)}`);
      return u.toString();
    };

    let toneKey = store.getRaw('hh.ref2.tone') || 'locker';
    let segKey  = store.getRaw('hh.ref2.seg')  || 'freund';
    const toneMap = { locker:'Locker', kurz:'Kurz', ergebnisorientiert:'Ergebnisorientiert', familie:'Familie', 'selbststÃ¤ndig':'SelbststÃ¤ndig' };

    const setTone = (key) => {
      toneBtns.forEach(b => b.setAttribute('aria-pressed', String(b.getAttribute('data-tone')===key)));
      toneKey = key; store.setRaw('hh.ref2.tone', key); render();
    };
    const setSeg = (key) => {
      segBtns.forEach(b => b.setAttribute('aria-pressed', String(b.getAttribute('data-seg')===key)));
      segKey = key; store.setRaw('hh.ref2.seg', key); toast('Zielgruppe gesetzt âœ”ï¸'); render();
    };

    const ensureURL = (text)=> /\bhttps?:\/\/\S+/i.test(text) ? text : `${text.trim()} ${buildURL()}`;
    function render(){
      const tplName = toneMap[toneKey] || 'Locker';
      const raw = templates[tplName] || Object.values(templates)[0] || '';
      const cleaned = raw.replace(/\{\{URL\}\}/g, buildURL()).replace(/^â€|â€œ|â€|â€|â€$/g,'').replace(/^"+|"+$/g,'');
      msgEl.textContent = cleaned;
      const time = $('.wa-time'); if (time) time.textContent = 'jetzt';
    }

    toneBtns.forEach(b => on(b,'click', ()=> setTone(b.getAttribute('data-tone') || 'locker')));
    segBtns.forEach(b  => on(b,'click',  ()=> setSeg(b.getAttribute('data-seg') || 'freund')));
    on(nameEl,'input', render, { passive:true });

    on(copyBtn,'click', async ()=>{
      try{
        const t = ensureURL(msgEl.textContent || '');
        if (navigator.clipboard && window.isSecureContext) await navigator.clipboard.writeText(t);
        else {
          const ta=document.createElement('textarea'); ta.value=t; document.body.appendChild(ta); ta.select(); document.execCommand?.('copy'); ta.remove();
        }
        toast('Kopiert âœ”ï¸');
      }catch{ toast('Konnte nicht kopieren'); }
    });

    on(shareBtn,'click', ()=>{
      const t = ensureURL(msgEl.textContent || '');
      const href = 'https://wa.me/?text=' + encodeURIComponent(t);
      window.open(href, '_blank', 'noopener');
    });

    setTone(toneKey); setSeg(segKey); render();
  }

  function initBottomNav() {
    const nav = $('.bottom-nav'); if (!nav) return;
    const items = $$('a.nav-item', nav); if (!items.length) return;
    const update = () => { /* keep simple to avoid mis-highlighting across pages */ };
    on(window,'scroll', update, { passive:true }); update();
  }

  function initStickyCTA() {
    const sticky = $('#sticky-cta') || $('#stickyCTA');
    const heroCTA = $('#hero-cta') || $('#startCheckHero');
    if (!sticky) return;
    const show = (v) => { sticky.classList.toggle('show', v); sticky.setAttribute('aria-hidden', String(!v)); };
    const ratioTrigger = () => {
      const doc = document.documentElement; const scrolled = (doc.scrollTop || document.body.scrollTop);
      const max = (doc.scrollHeight - doc.clientHeight) || 1; return (scrolled / max) >= 0.30;
    };
    let heroVisible = false;
    if ('IntersectionObserver' in window && heroCTA) {
      new IntersectionObserver(([e])=>{ heroVisible = e.isIntersecting; if (heroVisible) show(false); }, { threshold:.4 }).observe(heroCTA);
    }
    const onScroll = () => { const should = ratioTrigger() && !heroVisible; show(should); };
    on(window,'scroll', onScroll, { passive:true }); on(window,'resize', onScroll); onScroll();

    const btn = $('.sticky-cta .btn', sticky);
    on(btn,'click', ()=>{
      const targetSel = btn?.getAttribute('data-target');
      const target = targetSel ? $(targetSel) : ($('#quiz') || $('#referral-engine'));
      target?.scrollIntoView({ behavior:'smooth', block:'start' });
    });
  }

  /* ------------------------------- Bootstrp ------------------------------- */
  function initMisc() {
    document.documentElement.classList.remove('no-js');
    $$('#yearNow,[data-year]').forEach(el => el.textContent = String(new Date().getFullYear()));
  }

  function boot() {
    initMisc();

    // Core UX
    initDecisionAnchor();
    initAutoHighlightCriticalText();
    initFadeUp();
    initHeroAmpelAnimation();

    // Systems
    initPersonaSelection();
    initLiveFeed();
    initProofBars();
    initQuizWizard();
    initReferralEngine();

    // Shell
    initBottomNav();
    initStickyCTA();
  }

  (document.readyState === 'loading') ? on(document,'DOMContentLoaded', boot, { once:true }) : boot();

  window.app = {
    initDecisionAnchor,
    initAutoHighlightCriticalText,
    initFadeUp,
    initHeroAmpelAnimation,
    initPersonaSelection,
    initLiveFeed,
    initProofBars,
    initQuizWizard,
    generateSummary,
    generateTimeSlots,
    initReferralEngine,
    initBottomNav,
    initStickyCTA
  };
})();
